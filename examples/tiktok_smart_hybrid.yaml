# üß† –£–º–Ω—ã–π –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥
#
# Selenium - –¥–ª—è –ø–æ–∏—Å–∫–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
# PyAutoGUI - –¥–ª—è —ç–º—É–ª—è—Ü–∏–∏ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∫–ª–∏–∫–∏)
# Template - –¥–ª—è –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏
# AI - –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤

variables:
  ai_model: gemini-2.0-flash-exp
  reply_count: 3
  reply_tone: –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π
  comment_index: 1  # –ö–∞–∫–æ–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å (0=–ø–µ—Ä–≤—ã–π, 1=–≤—Ç–æ—Ä–æ–π, 2=—Ç—Ä–µ—Ç–∏–π)

sequences:
  tiktok_smart_hybrid:
    name: TikTok Smart Hybrid
    description: Selenium –Ω–∞—Ö–æ–¥–∏—Ç, PyAutoGUI –∫–ª–∏–∫–∞–µ—Ç, AI –æ—Ç–≤–µ—á–∞–µ—Ç
    
    steps:
    # 1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Chrome
    - action: selenium_connect
      browser: chrome
      debugger_address: "127.0.0.1:9222"
      description: –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Chrome
    
    # 2. –û—Ç–∫—Ä—ã—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (Template)
    - action: click
      template: templates/tiktok_comments_btn.png
      wait_for_appear: true
      timeout: 3.0
      description: –û—Ç–∫—Ä—ã—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
    
    - action: wait
      duration: 2.0
    
    # 3. –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
    - action: repeat
      times: "{reply_count}"
      description: –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
      steps:
      
      # 3.1. Selenium: –ò–∑–≤–ª–µ—á—å —Ç–µ–∫—Å—Ç –ö–û–ù–ö–†–ï–¢–ù–û–ì–û –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
      - action: selenium_extract
        selector: "[class*='comment-sidebar'] [data-e2e='comment-level-1']"
        index: "{comment_index}"  # –ö–∞–∫–æ–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (0, 1, 2...)
        save_to: comment_text
        description: –ü—Ä–æ—á–∏—Ç–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π #{comment_index}
      
      # 3.2. AI: –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç
      - action: ai_generate
        model: "{ai_model}"
        prompt: "–ù–∞–ø–∏—à–∏ {reply_tone} –æ—Ç–≤–µ—Ç –Ω–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π TikTok (–º–∞–∫—Å–∏–º—É–º 50 —Å–∏–º–≤–æ–ª–æ–≤): {comment_text}"
        max_tokens: 50
        temperature: 0.7
        save_to: reply_text
        description: –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç —á–µ—Ä–µ–∑ Gemini
      
      # 3.3. Selenium: –ü–æ–ª—É—á–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫–Ω–æ–ø–∫–∏ "–û—Ç–≤–µ—Ç–∏—Ç—å" –≠–¢–û–ì–û –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
      - action: selenium_get_coordinates
        selector: "[class*='comment-sidebar'] [data-e2e='comment-level-1']:nth-child({comment_index}) button[aria-label*='Reply']"
        index: 0
        save_x: reply_button_x
        save_y: reply_button_y
        description: –ü–æ–ª—É—á–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫–Ω–æ–ø–∫–∏ "–û—Ç–≤–µ—Ç–∏—Ç—å"
      
      # 3.4. PyAutoGUI: –ö–ª–∏–∫–Ω—É—Ç—å –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º (—ç–º—É–ª—è—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è!)
      - action: click
        position: absolute
        x: "{reply_button_x}"
        y: "{reply_button_y}"
        description: –ö–ª–∏–∫–Ω—É—Ç—å "–û—Ç–≤–µ—Ç–∏—Ç—å" (—ç–º—É–ª—è—Ü–∏—è)
      
      - action: wait
        duration: 0.5
      
      # 3.5. –î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
      - action: click
        position: absolute
        x: "{reply_button_x}"
        y: "{reply_button_y}"
        description: –í—Ç–æ—Ä–æ–π –∫–ª–∏–∫ (–æ—Ç–∫—Ä—ã—Ç—å –ø–æ–ª–µ –æ—Ç–≤–µ—Ç–∞)
      
      - action: wait
        duration: 1.0
      
      # 3.6. Template: –ö–ª–∏–∫–Ω—É—Ç—å –ø–æ–ª–µ –≤–≤–æ–¥–∞
      - action: click
        template: templates/tiktok_input_field.png
        wait_for_appear: true
        timeout: 3.0
        description: –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–µ –≤–≤–æ–¥–∞
      
      # 3.7. PyAutoGUI: –í–≤–µ—Å—Ç–∏ –æ—Ç–≤–µ—Ç
      - action: type
        text: "{reply_text}"
        description: –í–≤–µ—Å—Ç–∏ AI –æ—Ç–≤–µ—Ç
      
      # 3.8. Template: –û—Ç–ø—Ä–∞–≤–∏—Ç—å
      - action: click
        templates:
          - templates/tiktok_send_btn_long.png
          - templates/tiktok_send_btn.png
        wait_for_appear: true
        timeout: 3.0
        index: 1
        description: –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å (–≤–µ—Ä—Ö–Ω—è—è)
      
      # 3.9. –ü–∞—É–∑–∞
      - action: wait
        duration: 2.0
        description: –ü–∞—É–∑–∞ –º–µ–∂–¥—É –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
      
      # 3.10. –£–≤–µ–ª–∏—á–∏—Ç—å –∏–Ω–¥–µ–∫—Å –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
      - action: set_variable
        name: comment_index
        value: "{comment_index + 1}"
        description: –°–ª–µ–¥—É—é—â–∏–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π

settings:
  default_delay: 1
  failsafe: true
