# üéØ OCR vs Selenium –¥–ª—è —á—Ç–µ–Ω–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤

## üìã –í–æ–ø—Ä–æ—Å:

> "–ú–æ–∂–Ω–æ –ª–∏ –¥–æ–±–∞–≤–∏—Ç—å Selenium –¥–ª—è —á—Ç–µ–Ω–∏—è DOM –≤ Atlas –±—Ä–∞—É–∑–µ—Ä?"

## ‚ùå –ö–æ—Ä–æ—Ç–∫–∏–π –æ—Ç–≤–µ—Ç: –ù–ï–¢

**Selenium –ù–ï –ú–û–ñ–ï–¢ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —É–∂–µ –æ—Ç–∫—Ä—ã—Ç–æ–º—É Atlas –±—Ä–∞—É–∑–µ—Ä—É.**

---

## üîç –ü–æ—á–µ–º—É Selenium –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å Atlas?

### **Selenium —Ç—Ä–µ–±—É–µ—Ç:**
1. –ó–∞–ø—É—Å–∫ –±—Ä–∞—É–∑–µ—Ä–∞ —á–µ—Ä–µ–∑ WebDriver
2. –ö–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø—Ä–æ—Ü–µ—Å—Å–æ–º –±—Ä–∞—É–∑–µ—Ä–∞
3. –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ–ª–∞–≥–∏ –∑–∞–ø—É—Å–∫–∞ (`--remote-debugging-port`)

### **Atlas:**
- –û—Ç–¥–µ–ª—å–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä (–Ω–µ Chrome/Firefox)
- –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ WebDriver
- –ù–µ—Ç remote debugging –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

---

## ‚úÖ –†–µ—à–µ–Ω–∏—è:

### **–†–µ—à–µ–Ω–∏–µ 1: Atlas + OCR (–¢–ï–ö–£–©–ï–ï - —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è!)**

```yaml
# –ò—Å–ø–æ–ª—å–∑—É–µ–º:
1. Atlas - –¥–ª—è –∫–ª–∏–∫–æ–≤ (Template matching) ‚úÖ
2. OCR - –¥–ª—è —á—Ç–µ–Ω–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ ‚úÖ
3. Gemini AI - –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤ ‚úÖ
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å Atlas
- ‚úÖ –í—Å–µ –∫–Ω–æ–ø–∫–∏ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ –ù–µ –Ω—É–∂–Ω–æ –º–µ–Ω—è—Ç—å –±—Ä–∞—É–∑–µ—Ä
- ‚úÖ OCR —Å –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–æ–π = –≤—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå OCR –º–µ–¥–ª–µ–Ω–Ω–µ–µ —á–µ–º DOM (~2-3 —Å–µ–∫ vs ~0.1 —Å–µ–∫)
- ‚ùå –ú–æ–∂–µ—Ç –æ—à–∏–±–∞—Ç—å—Å—è –Ω–∞ —Å–ª–æ–∂–Ω—ã—Ö —Ç–µ–∫—Å—Ç–∞—Ö

**–ö–æ–Ω—Ñ–∏–≥:**
```yaml
# –ß–∏—Ç–∞–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —á–µ—Ä–µ–∑ OCR
- action: ai_extract_text
  method: ocr
  region: [200, 400, 500, 80]  # –û–±–ª–∞—Å—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
  preprocess: true  # –£–ª—É—á—à–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
  save_to: comment_text

# AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç
- action: ai_generate
  prompt: "–û—Ç–≤–µ—Ç—å –Ω–∞: {comment_text}"
  save_to: reply_text

# –í–≤–æ–¥–∏–º –æ—Ç–≤–µ—Ç
- action: type
  text: "{reply_text}"
```

---

### **–†–µ—à–µ–Ω–∏–µ 2: Chrome + Selenium (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)**

–ü–µ—Ä–µ—Ö–æ–¥ —Å Atlas –Ω–∞ Chrome:

```yaml
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å Chrome —á–µ—Ä–µ–∑ Selenium
- action: selenium_start
  browser: chrome
  url: "https://www.tiktok.com"

# 2. –ß–∏—Ç–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —á–µ—Ä–µ–∑ DOM
- action: selenium_extract
  selector: "[data-e2e='comment-text']"
  save_to: comment_text

# 3. –ö–ª–∏–∫–∞—Ç—å —á–µ—Ä–µ–∑ Selenium
- action: selenium_click
  selector: "[data-e2e='reply-button']"
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ë—ã—Å—Ç—Ä–æ–µ —á—Ç–µ–Ω–∏–µ DOM (~0.1 —Å–µ–∫)
- ‚úÖ 100% —Ç–æ—á–Ω–æ—Å—Ç—å
- ‚úÖ –ù–µ –Ω—É–∂–µ–Ω OCR

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –ü–æ—Ç–µ—Ä—è–µ—à—å Atlas
- ‚ùå –ù—É–∂–Ω–æ –ø–µ—Ä–µ–Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –í–°–ï –∫–Ω–æ–ø–∫–∏
- ‚ùå –ù–µ—Ç Template matching (—Ç–æ–ª—å–∫–æ CSS —Å–µ–ª–µ–∫—Ç–æ—Ä—ã)
- ‚ùå TikTok –º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å Selenium

---

### **–†–µ—à–µ–Ω–∏–µ 3: Atlas + CDP (—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–æ)**

–ï—Å–ª–∏ Atlas –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Chrome DevTools Protocol:

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏ Atlas —Å debugging
/Applications/Atlas.app/Contents/MacOS/Atlas --remote-debugging-port=9222

# 2. –ü–æ–¥–∫–ª—é—á–∏—Å—å —á–µ—Ä–µ–∑ Selenium
from selenium import webdriver
options = webdriver.ChromeOptions()
options.add_experimental_option("debuggerAddress", "127.0.0.1:9222")
driver = webdriver.Chrome(options=options)
```

**–ù–û:** Atlas —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç CDP.

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –û—Å—Ç–∞–≤—å Atlas + OCR!

### **–ü–æ—á–µ–º—É:**

1. **–£–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** ‚úÖ
   - –í—Å–µ –∫–Ω–æ–ø–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
   - Template matching —Ä–∞–±–æ—Ç–∞–µ—Ç
   - OCR —á–∏—Ç–∞–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

2. **OCR –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ—á–Ω—ã–π** ‚úÖ
   - –ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (CLAHE, Otsu)
   - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ç–µ–∫—Å—Ç–∞ –ø–æ –ø–æ–∑–∏—Ü–∏–∏
   - Gemini AI –∫–æ–º–ø–µ–Ω—Å–∏—Ä—É–µ—Ç –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç–∏

3. **–ù–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–µ–ª—ã–≤–∞—Ç—å** ‚úÖ
   - –°–æ—Ö—Ä–∞–Ω—è–µ—à—å Atlas
   - –°–æ—Ö—Ä–∞–Ω—è–µ—à—å –≤—Å–µ —à–∞–±–ª–æ–Ω—ã
   - –°–æ—Ö—Ä–∞–Ω—è–µ—à—å –≤—Å—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É

---

## üîß –£–ª—É—á—à–µ–Ω–∏–µ OCR (–±–µ–∑ Selenium)

### **1. –¢–æ—á–Ω–∞—è –æ–±–ª–∞—Å—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è**

–ò—Å–ø–æ–ª—å–∑—É–π —É—Ç–∏–ª–∏—Ç—É –¥–ª—è –ø–æ–∏—Å–∫–∞ –æ–±–ª–∞—Å—Ç–∏:

```bash
python3 utils/find_comment_region.py

# 1. –ù–∞–≤–µ–¥–∏ –Ω–∞ –≤–µ—Ä—Ö–Ω–∏–π –ª–µ–≤—ã–π —É–≥–æ–ª –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è ‚Üí SPACE
# 2. –ù–∞–≤–µ–¥–∏ –Ω–∞ –Ω–∏–∂–Ω–∏–π –ø—Ä–∞–≤—ã–π —É–≥–æ–ª ‚Üí SPACE
# 3. –°–∫–æ–ø–∏—Ä—É–π region: [x, y, width, height]
```

### **2. –ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (—É–∂–µ –≤–∫–ª—é—á–µ–Ω–∞!)**

```yaml
- action: ai_extract_text
  method: ocr
  region: [200, 400, 500, 80]
  preprocess: true  # ‚úÖ –í–∫–ª—é—á–µ–Ω–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  save_to: comment_text
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞:**
1. –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ grayscale (—á–µ—Ä–Ω–æ-–±–µ–ª–æ–µ)
2. –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞ (CLAHE)
3. –ë–∏–Ω–∞—Ä–∏–∑–∞—Ü–∏—è (Otsu threshold)
4. –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ç–µ–∫—Å—Ç–∞ –ø–æ –ø–æ–∑–∏—Ü–∏–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¢–æ—á–Ω–æ—Å—Ç—å OCR ~95%+

### **3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–º–ø—Ç–∞ AI**

Gemini AI –º–æ–∂–µ—Ç –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏ OCR:

```yaml
- action: ai_generate
  prompt: |
    –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–ø–∏—Å–∞–ª –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–º–æ–∂–µ—Ç –±—ã—Ç—å —Å –æ–ø–µ—á–∞—Ç–∫–∞–º–∏ OCR):
    "{comment_text}"
    
    –ù–∞–ø–∏—à–∏ –∫–æ—Ä–æ—Ç–∫–∏–π –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π –æ—Ç–≤–µ—Ç (–¥–æ 50 —Å–∏–º–≤–æ–ª–æ–≤).
    –ò–≥–Ω–æ—Ä–∏—Ä—É–π –æ–ø–µ—á–∞—Ç–∫–∏ –∏ –æ—Ç–≤–µ—á–∞–π –Ω–∞ —Å–º—ã—Å–ª –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è.
  save_to: reply_text
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤

| –ú–µ—Ç–æ–¥ | –°–∫–æ—Ä–æ—Å—Ç—å | –¢–æ—á–Ω–æ—Å—Ç—å | –°–ª–æ–∂–Ω–æ—Å—Ç—å | Atlas |
|-------|----------|----------|-----------|-------|
| **OCR** | ‚ö°‚ö° (2-3—Å) | ‚≠ê‚≠ê‚≠ê‚≠ê (95%) | üîß –õ–µ–≥–∫–æ | ‚úÖ –î–∞ |
| **Selenium** | ‚ö°‚ö°‚ö°‚ö°‚ö° (0.1—Å) | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (100%) | üîßüîß –°–ª–æ–∂–Ω–æ | ‚ùå –ù–µ—Ç |
| **CDP** | ‚ö°‚ö°‚ö°‚ö°‚ö° (0.1—Å) | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (100%) | üîßüîßüîß –û—á–µ–Ω—å —Å–ª–æ–∂–Ω–æ | ‚ùì –ú–æ–∂–µ—Ç –±—ã—Ç—å |

---

## üéØ –ò—Ç–æ–≥

### **–¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ (Atlas + OCR):**

```yaml
# ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!
sequences:
  tiktok_ai_atlas:
    steps:
    # 1. –ß–∏—Ç–∞–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (OCR)
    - action: ai_extract_text
      method: ocr
      region: [200, 400, 500, 80]
      preprocess: true
      save_to: comment_text
    
    # 2. AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç
    - action: ai_generate
      prompt: "–û—Ç–≤–µ—Ç—å –Ω–∞: {comment_text}"
      save_to: reply_text
    
    # 3. –ö–ª–∏–∫–∞–µ–º "–û—Ç–≤–µ—Ç–∏—Ç—å" (Template)
    - action: click
      template: templates/tiktok_reply_btn.png
    
    # 4. –í–≤–æ–¥–∏–º –æ—Ç–≤–µ—Ç
    - action: type
      text: "{reply_text}"
    
    # 5. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º (Template)
    - action: click
      template: templates/tiktok_send_btn.png
      index: 1
```

### **–ó–∞–ø—É—Å–∫:**

```bash
export GEMINI_API_KEY="AIzaSyBGlFjt6bKJLJqcsavArM6wb7voH111gc8"

python3 macro_sequence.py \
  --config examples/tiktok_ai_atlas.yaml \
  --run tiktok_ai_atlas
```

---

## üí° –°–æ–≤–µ—Ç—ã –¥–ª—è –ª—É—á—à–µ–≥–æ OCR:

1. **–¢–æ—á–Ω–∞—è –æ–±–ª–∞—Å—Ç—å** - –∏—Å–ø–æ–ª—å–∑—É–π `find_comment_region.py`
2. **–ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞** - –≤–∫–ª—é—á–µ–Ω–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
3. **–£–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç** - AI –∏—Å–ø—Ä–∞–≤–∏—Ç –æ—à–∏–±–∫–∏ OCR
4. **–•–æ—Ä–æ—à–µ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ** - —è—Ä–∫–∏–π —ç–∫—Ä–∞–Ω, –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω—ã–µ —Ü–≤–µ—Ç–∞
5. **–ö—Ä—É–ø–Ω—ã–π —à—Ä–∏—Ñ—Ç** - —É–≤–µ–ª–∏—á—å –º–∞—Å—à—Ç–∞–± –±—Ä–∞—É–∑–µ—Ä–∞ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

---

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ —á–∏—Ç–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã!** üöÄ
