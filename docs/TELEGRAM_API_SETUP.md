# üöÄ Telegram Auto Reply —á–µ—Ä–µ–∑ API - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## üéØ –ß—Ç–æ —ç—Ç–æ?

**–ê–≤—Ç–æ–æ—Ç–≤–µ—Ç—á–∏–∫ –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Telegram User API (Telethon)**

- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –æ—Ç **—Ç–≤–æ–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞** (–Ω–µ –±–æ—Ç)
- ‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã (webhook)
- ‚úÖ Whitelist –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- ‚úÖ Gemini AI –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤
- ‚úÖ –ù–∞–¥–µ–∂–Ω–æ (–Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞)

---

## üìã –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç—å API ID –∏ Hash

### **1.1. –ü–µ—Ä–µ–π–¥–∏ –Ω–∞ https://my.telegram.org**

### **1.2. –í–æ–π–¥–∏ —á–µ—Ä–µ–∑ —Å–≤–æ–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞**

### **1.3. –ü–µ—Ä–µ–π–¥–∏ –≤ "API development tools"**

### **1.4. –°–æ–∑–¥–∞–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
- **App title:** `My Auto Reply Bot`
- **Short name:** `autoreply`
- **Platform:** `Desktop`

### **1.5. –ü–æ–ª—É—á–∏:**
- **api_id** - —á–∏—Å–ª–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `12345678`)
- **api_hash** - —Å—Ç—Ä–æ–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `abcdef1234567890abcdef1234567890`)

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –ù–∏–∫–æ–º—É –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–π —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ!

---

## üìã –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
cd /Users/kostya/Desktop/local-macros

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
pip3 install -r requirements_telegram.txt
```

**–ß—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è:**
- `telethon` - Telegram User API
- `google-generativeai` - Gemini AI

---

## üìã –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–∫—Ä–∏–ø—Ç

–û—Ç–∫—Ä–æ–π `telegram_auto_reply_api.py` –∏ –∏–∑–º–µ–Ω–∏:

```python
# Telegram API (–ø–æ–ª—É—á–∏ –Ω–∞ https://my.telegram.org)
API_ID = 12345678  # –¢–≤–æ–π API ID
API_HASH = "abcdef1234567890"  # –¢–≤–æ–π API Hash

# Whitelist - ID –ª—é–¥–µ–π –∫–æ—Ç–æ—Ä—ã–º –æ—Ç–≤–µ—á–∞—Ç—å
WHITELIST = [
    7204684283,   # Fsdf
    7816070239,   # Joker
    924192692,    # –ê—Ä—Ç–µ–º
]

# –¢–æ–Ω –æ—Ç–≤–µ—Ç–æ–≤
REPLY_TONE = "–¥–µ—Ä–∑–∫–∏–π"  # –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π, —Ñ–æ—Ä–º–∞–ª—å–Ω—ã–π, –≤–µ—Å–µ–ª—ã–π
```

---

## üìã –®–∞–≥ 4: –ó–∞–ø—É—Å—Ç–∏—Ç—å

```bash
export GEMINI_API_KEY="AIzaSyBGlFjt6bKJLJqcsavArM6wb7voH111gc8"

python3 telegram_auto_reply_api.py
```

### **–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:**

1. **–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫:**
   - –ü–æ–ø—Ä–æ—Å–∏—Ç –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
   - –û—Ç–ø—Ä–∞–≤–∏—Ç –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤ Telegram
   - –í–≤–µ–¥–∏ –∫–æ–¥
   - –°–æ–∑–¥–∞—Å—Ç —Ñ–∞–π–ª `telegram_session.session` (—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é)

2. **–ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—É—Å–∫–∏:**
   - –°—Ä–∞–∑—É –ø–æ–¥–∫–ª—é—á–∏—Ç—Å—è (–Ω–µ –Ω—É–∂–µ–Ω –∫–æ–¥)

---

## üìä –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã:

```
============================================================
ü§ñ Telegram Auto Reply Bot (User API)
============================================================
üì± API ID: 12345678
üîë Gemini Model: gemini-2.0-flash-exp
üí¨ –¢–æ–Ω –æ—Ç–≤–µ—Ç–æ–≤: –¥–µ—Ä–∑–∫–∏–π
üë• Whitelist: 3 —á–µ–ª–æ–≤–µ–∫
   - ID: 7204684283
   - ID: 7816070239
   - ID: 924192692
============================================================
üöÄ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞...
‚è∏Ô∏è  –ù–∞–∂–º–∏ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
============================================================
‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –∫–∞–∫: Kostya (@kostya_username)
üìû –¢–µ–ª–µ—Ñ–æ–Ω: +1234567890
üÜî ID: 987654321
============================================================
‚úÖ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω! –û–∂–∏–¥–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π...
============================================================

============================================================
üì® –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç: Fsdf (ID: 7204684283)
üìù –¢–µ–∫—Å—Ç: –ü—Ä–∏–≤–µ—Ç, –∫–∞–∫ –¥–µ–ª–∞?
ü§ñ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è AI –æ—Ç–≤–µ—Ç–∞...
‚úÖ AI –æ—Ç–≤–µ—Ç: –ù–æ—Ä–º, –∞ —É —Ç–µ–±—è?
üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞...
‚úÖ –û—Ç–≤–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!
============================================================
```

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### **–û—Ç–∫–ª—é—á–∏—Ç—å whitelist (–æ—Ç–≤–µ—á–∞—Ç—å –≤—Å–µ–º):**

```python
WHITELIST = []  # –ü—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫
```

### **–ò–∑–º–µ–Ω–∏—Ç—å —Ç–æ–Ω:**

```python
REPLY_TONE = "–¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π"  # –∏–ª–∏ —Ñ–æ—Ä–º–∞–ª—å–Ω—ã–π, –≤–µ—Å–µ–ª—ã–π, —Å–∞—Ä–∫–∞—Å—Ç–∏—á–Ω—ã–π
```

### **–ò–∑–º–µ–Ω–∏—Ç—å –¥–ª–∏–Ω—É –æ—Ç–≤–µ—Ç–æ–≤:**

```python
MAX_REPLY_LENGTH = 50  # –ë—ã–ª–æ 30
```

### **–î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –ª—é–¥–µ–π:**

```python
WHITELIST = [
    7204684283,
    7816070239,
    924192692,
    123456789,  # –ù–æ–≤—ã–π —á–µ–ª–æ–≤–µ–∫
    987654321,  # –ï—â–µ –æ–¥–∏–Ω
]
```

---

## üîç –ö–∞–∫ —É–∑–Ω–∞—Ç—å ID —á–µ–ª–æ–≤–µ–∫–∞?

### **–ú–µ—Ç–æ–¥ 1: –ß–µ—Ä–µ–∑ –±–æ—Ç–∞**

1. –ù–∞–ø–∏—à–∏ –±–æ—Ç—É @userinfobot
2. –ü–µ—Ä–µ—à–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç —á–µ–ª–æ–≤–µ–∫–∞
3. –ü–æ–ª—É—á–∏—à—å –µ–≥–æ ID

### **–ú–µ—Ç–æ–¥ 2: –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç**

–ó–∞–ø—É—Å—Ç–∏ –±–æ—Ç–∞ –∏ –ø–æ–ø—Ä–æ—Å–∏ —á–µ–ª–æ–≤–µ–∫–∞ –Ω–∞–ø–∏—Å–∞—Ç—å —Ç–µ–±–µ. –í –ª–æ–≥–∞—Ö —É–≤–∏–¥–∏—à—å:

```
üì® –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç: –ò–º—è (ID: 123456789)
```

---

## üêõ Troubleshooting

### **–ü—Ä–æ–±–ª–µ–º–∞: "API ID or Hash is invalid"**

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å https://my.telegram.org
- API ID - —ç—Ç–æ —á–∏—Å–ª–æ (–±–µ–∑ –∫–∞–≤—ã—á–µ–∫)
- API Hash - —ç—Ç–æ —Å—Ç—Ä–æ–∫–∞ (–≤ –∫–∞–≤—ã—á–∫–∞—Ö)

---

### **–ü—Ä–æ–±–ª–µ–º–∞: "Phone number is invalid"**

**–†–µ—à–µ–Ω–∏–µ:**
- –í–≤–æ–¥–∏ –Ω–æ–º–µ—Ä –≤ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ: `+1234567890`
- –ë–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤ –∏ –¥–µ—Ñ–∏—Å–æ–≤

---

### **–ü—Ä–æ–±–ª–µ–º–∞: "Session file is corrupted"**

**–†–µ—à–µ–Ω–∏–µ:**
```bash
rm telegram_session.session
# –ó–∞–ø—É—Å—Ç–∏ —Å–Ω–æ–≤–∞ –∏ –≤–≤–µ–¥–∏ –∫–æ–¥ –∑–∞–Ω–æ–≤–æ
```

---

### **–ü—Ä–æ–±–ª–µ–º–∞: –ù–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è**

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —á–µ–ª–æ–≤–µ–∫ –≤ whitelist
2. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ - –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—à–∏–±–∫–∞ Gemini API
3. –£–±–µ–¥–∏—Å—å —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω (`‚úÖ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω!`)

---

## üöÄ –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–µ (Linux/Mac)

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Ñ–æ–Ω–µ
nohup python3 telegram_auto_reply_api.py > telegram_bot.log 2>&1 &

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
tail -f telegram_bot.log

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
pkill -f telegram_auto_reply_api.py
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: API vs Selenium

| –§—É–Ω–∫—Ü–∏—è | Selenium (–≤–µ–±) | Telethon (API) |
|---------|----------------|----------------|
| **–°–∫–æ—Ä–æ—Å—Ç—å** | –ú–µ–¥–ª–µ–Ω–Ω–æ (–∫–ª–∏–∫–∏) | –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ |
| **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** | –ú–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å—Å—è | –°—Ç–∞–±–∏–ª—å–Ω–æ |
| **–†–µ—Å—É—Ä—Å—ã** | –ú–Ω–æ–≥–æ (–±—Ä–∞—É–∑–µ—Ä) | –ú–∞–ª–æ |
| **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è** | –°–ª–æ–∂–Ω–æ | –õ–µ–≥–∫–æ |
| **Webhook** | –ù–µ—Ç | –î–∞ |
| **–ú–µ–¥–∏–∞** | –°–ª–æ–∂–Ω–æ | –õ–µ–≥–∫–æ |

**–í—ã–≤–æ–¥: API –Ω–∞–º–Ω–æ–≥–æ –ª—É—á—à–µ!** ‚úÖ

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è –µ—Å—Ç—å:
- ‚úÖ `telegram_auto_reply_api.py` - —Ä–∞–±–æ—á–∏–π —Å–∫—Ä–∏–ø—Ç
- ‚úÖ `requirements_telegram.txt` - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ Whitelist –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- ‚úÖ Gemini AI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ó–∞–ø—É—Å–∫–∞–π –∏ –Ω–∞—Å–ª–∞–∂–¥–∞–π—Å—è!** üöÄ
