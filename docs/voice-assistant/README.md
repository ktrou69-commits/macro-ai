# 🎯 Голосовой AI-ассистент для Macro AI

Документация по интеграции голосового ассистента в существующий проект Macro AI.

## 📋 Обзор проекта

Цель: Создать универсального голосового ассистента, который:
- Слушает голосовые команды постоянно
- Отвечает голосом ("Да сэр, открываю гугл хром")
- Выполняет команды через DOM/System/CV
- Помнит состояние и может продолжить макросы
- Работает "под капотом" без мешающих UI элементов

## 🏗️ Архитектура интеграции

```
┌─────────────────────────────────────────────┐
│                VOICE INPUT                  │
│  ┌─────────────┐    ┌─────────────────────┐ │
│  │ Microphone  │───▶│ Speech Recognition  │ │
│  └─────────────┘    └─────────────────────┘ │
└─────────────────────┬───────────────────────┘
                      │
┌─────────────────────▼───────────────────────┐
│              VOICE ASSISTANT                │
│  ┌─────────────────────────────────────────┐ │
│  │         AI Orchestrator                 │ │
│  │  (расширенный macro_generator.py)      │ │
│  └─────────────────┬───────────────────────┘ │
└────────────────────┼───────────────────────┘
                     │
┌────────────────────▼───────────────────────┐
│           EXECUTION STRATEGY               │
│  ┌──────────┐ ┌──────────┐ ┌─────────────┐ │
│  │   DOM    │ │  SYSTEM  │ │     CV      │ │
│  │(existing)│ │  (new)   │ │ (existing)  │ │
│  └──────────┘ └──────────┘ └─────────────┘ │
└────────────────────────────────────────────┘
                     │
┌────────────────────▼───────────────────────┐
│              STATE MANAGER                 │
│  ┌─────────────────────────────────────────┐ │
│  │         Memory & Context                │ │
│  └─────────────────────────────────────────┘ │
└────────────────────────────────────────────┘
```

## 🚀 Этапы реализации

- **[Этап 1: Базовая архитектура](./stage-1-basic-architecture.md)** (1-2 недели)
- **[Этап 2: Системные команды](./stage-2-system-commands.md)** (1 неделя)  
- **[Этап 3: Голосовой ввод](./stage-3-voice-input.md)** (1-2 недели)
- **[Этап 4: GUI интеграция](./stage-4-gui-integration.md)** (1 неделя)
- **[Этап 5: Тестирование](./stage-5-testing.md)** (1 неделя)

## 📁 Итоговая структура проекта

```
local-macros/
├── src/
│   ├── main.py                    # ← РАСШИРИТЬ: голосовой режим
│   ├── voice/                     # ← НОВОЕ: голосовые модули
│   │   ├── speech_recognition.py  # Распознавание речи
│   │   ├── text_to_speech.py      # Синтез речи  
│   │   └── voice_assistant.py     # Главный ассистент
│   ├── system/                    # ← НОВОЕ: системные команды
│   │   ├── macos_commands.py      # macOS API
│   │   └── system_orchestrator.py # Выбор стратегии
│   ├── memory/                    # ← НОВОЕ: состояния и память
│   │   ├── state_manager.py       # Состояние макросов
│   │   └── conversation_memory.py # Память диалогов
│   ├── core/
│   │   ├── atlas_dsl_parser.py    # ← РАСШИРИТЬ: @system команды
│   │   └── macro_sequence.py      # ← РАСШИРИТЬ: сохранение состояния
│   └── ai/
│       └── macro_generator.py     # ← РАСШИРИТЬ: голосовые команды
├── gui/
│   └── views/
│       └── voice_assistant_widget.py # ← НОВОЕ: GUI для ассистента
└── requirements.txt               # ← РАСШИРИТЬ: голосовые зависимости
```

## 🎯 Ключевые принципы

1. **Минимальная инвазивность** - максимальное переиспользование существующего кода
2. **Модульность** - каждый компонент независим и тестируем
3. **Обратная совместимость** - существующий функционал не ломается
4. **Производительность** - голосовой ввод не замедляет основную систему
5. **Безопасность** - системные команды ограничены whitelist'ом

## 📚 Дополнительные материалы

- [Технические требования](./technical-requirements.md)
- [API Reference](./api-reference.md)
- [Troubleshooting](./troubleshooting.md)
