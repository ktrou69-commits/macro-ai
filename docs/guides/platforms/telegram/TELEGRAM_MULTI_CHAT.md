# üîÑ Telegram Multi-Chat - –ê–≤—Ç–æ–æ—Ç–≤–µ—Ç—á–∏–∫ –¥–ª—è –≤—Å–µ—Ö —á–∞—Ç–æ–≤

## üéØ –ß—Ç–æ —ç—Ç–æ?

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–≤–µ—Ç—á–∏–∫ –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–æ –í–°–ï–ú–ò —á–∞—Ç–∞–º–∏!**

- ‚úÖ –ù–∞—Ö–æ–¥–∏—Ç —á–∞—Ç—ã —Å –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –º–µ–∂–¥—É –Ω–∏–º–∏
- ‚úÖ –û—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∫–∞–∂–¥–æ–º —á–∞—Ç–µ
- ‚úÖ –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —á–∞—Ç—É

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
export GEMINI_API_KEY="—Ç–≤–æ–π_–∫–ª—é—á"

python3 macro_sequence.py \
  --config examples/telegram_multi_chat.yaml \
  --run telegram_multi_chat
```

---

## üìã –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### **–®–∞–≥ 1: –ü–æ–∏—Å–∫ —á–∞—Ç–æ–≤ —Å –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º–∏**

```yaml
- action: selenium_extract
  selector: ".dialog-subtitle-badge.unread"
  extract_all: true
```

**HTML –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–≥–æ —á–∞—Ç–∞:**
```html
<div class="dialog-subtitle-badge badge unread">1</div>
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- Selenium –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ badge —Å –∫–ª–∞—Å—Å–æ–º `unread`
- –≠—Ç–æ —á–∞—Ç—ã –≥–¥–µ –µ—Å—Ç—å –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

---

### **–®–∞–≥ 2: –ö–ª–∏–∫ –Ω–∞ —á–∞—Ç**

```yaml
- action: selenium_click
  selector: ".dialog-subtitle-badge.unread"
  index: 0  # –ü–µ—Ä–≤—ã–π –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–π
  parent_selector: "../.."  # –ü–æ–¥–Ω—è—Ç—å—Å—è –∫ —Ä–æ–¥–∏—Ç–µ–ª—é —Ä–æ–¥–∏—Ç–µ–ª—è (—Å–∞–º —á–∞—Ç)
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ HTML:**
```html
<div class="chat-item">  ‚Üê –†–æ–¥–∏—Ç–µ–ª—å —Ä–æ–¥–∏—Ç–µ–ª—è (—Å—é–¥–∞ –∫–ª–∏–∫–∞–µ–º)
  <div class="chat-info">
    <div class="dialog-subtitle">
      <div class="dialog-subtitle-badge unread">1</div>  ‚Üê –ù–∞—Ö–æ–¥–∏–º —ç—Ç–æ
    </div>
  </div>
</div>
```

**XPATH `../..`:**
- `..` - —Ä–æ–¥–∏—Ç–µ–ª—å (dialog-subtitle)
- `../..` - —Ä–æ–¥–∏—Ç–µ–ª—å —Ä–æ–¥–∏—Ç–µ–ª—è (chat-item)

---

### **–®–∞–≥ 3: –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π**

```yaml
- action: repeat
  times: 5  # –î–æ 5 —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç–µ
  steps:
    - selenium_extract  # –ò–∑–≤–ª–µ—á—å —Å–æ–æ–±—â–µ–Ω–∏–µ
    - ai_generate       # AI –æ—Ç–≤–µ—Ç
    - click + type      # –ü–µ—á–∞—Ç–∞—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å
```

**–õ–æ–≥–∏–∫–∞:**
1. –ò–∑–≤–ª–µ–∫–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤—Ö–æ–¥—è—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç: –Ω–æ–≤–æ–µ –∏–ª–∏ —Å—Ç–∞—Ä–æ–µ?
3. –ï—Å–ª–∏ –Ω–æ–≤–æ–µ ‚Üí AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç
4. –ü–µ—á–∞—Ç–∞–µ—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç
5. –ü–æ–≤—Ç–æ—Ä—è–µ—Ç –¥–æ 5 —Ä–∞–∑ (–∏–ª–∏ –ø–æ–∫–∞ –Ω–µ –∑–∞–∫–æ–Ω—á–∞—Ç—Å—è –Ω–æ–≤—ã–µ)

---

### **–®–∞–≥ 4: –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —á–∞—Ç—É**

```yaml
- action: wait
  duration: 5.0  # –ü–∞—É–∑–∞ 5 —Å–µ–∫—É–Ω–¥
```

–ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —á–∞—Ç–∞:
- –ü–∞—É–∑–∞ 5 —Å–µ–∫—É–Ω–¥
- –¶–∏–∫–ª –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è
- –°–Ω–æ–≤–∞ –∏—â–µ—Ç —á–∞—Ç—ã —Å –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º–∏
- –ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π

---

## üéØ –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª

```
1. –ù–∞–π—Ç–∏ –≤—Å–µ —á–∞—Ç—ã —Å –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º–∏
   ‚Üì
2. –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ –ø–µ—Ä–≤—ã–π —á–∞—Ç
   ‚Üì
3. –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –¥–æ 5 —Å–æ–æ–±—â–µ–Ω–∏–π:
   ‚îú‚îÄ –ò–∑–≤–ª–µ—á—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ
   ‚îú‚îÄ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: –Ω–æ–≤–æ–µ?
   ‚îú‚îÄ AI –æ—Ç–≤–µ—Ç
   ‚îú‚îÄ –ü–µ—á–∞—Ç–∞—Ç—å
   ‚îî‚îÄ –û—Ç–ø—Ä–∞–≤–∏—Ç—å
   ‚Üì
4. –ü–∞—É–∑–∞ 5 —Å–µ–∫—É–Ω–¥
   ‚Üì
5. –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —à–∞–≥—É 1 (—Å–ª–µ–¥—É—é—â–∏–π —á–∞—Ç)
```

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ —á–∞—Ç:**

```yaml
- action: repeat
  times: 5  # –ò–∑–º–µ–Ω–∏ –Ω–∞ 10, 20...
```

### **–ò–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É —á–∞—Ç–∞–º–∏:**

```yaml
- action: wait
  duration: 5.0  # –ò–∑–º–µ–Ω–∏ –Ω–∞ 10.0, 30.0...
```

### **–¢–æ–Ω –æ—Ç–≤–µ—Ç–æ–≤:**

```yaml
variables:
  reply_tone: "–¥–µ—Ä–∑–∫–∏–π"  # –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π, —Ñ–æ—Ä–º–∞–ª—å–Ω—ã–π, –≤–µ—Å–µ–ª—ã–π
```

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### **–ü—Ä–∏–º–µ—Ä 1: –ë—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö —á–∞—Ç–æ–≤**

```yaml
variables:
  reply_tone: "–∫–æ—Ä–æ—Ç–∫–∏–π"

# –í repeat:
times: 3  # –ü–æ 3 —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ —á–∞—Ç
duration: 2.0  # –ë—ã—Å—Ç—Ä–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ
```

---

### **–ü—Ä–∏–º–µ—Ä 2: –ü–æ–¥—Ä–æ–±–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã**

```yaml
variables:
  reply_tone: "–¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π"

# –í ai_generate:
max_tokens: 50  # –î–ª–∏–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
prompt: "–ù–∞–ø–∏—à–∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–π –æ—Ç–≤–µ—Ç..."
```

---

### **–ü—Ä–∏–º–µ—Ä 3: –¢–æ–ª—å–∫–æ –≤–∞–∂–Ω—ã–µ —á–∞—Ç—ã**

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä –ø–æ –∏–º–µ–Ω–∏ —á–∞—Ç–∞:

```yaml
- action: selenium_extract
  selector: ".dialog-subtitle-badge.unread"
  # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–º—è —á–∞—Ç–∞
```

---

## üîç –ö–∞–∫ –Ω–∞–π—Ç–∏ —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è —á–∞—Ç–∞

### **–ú–µ—Ç–æ–¥ 1: Chrome DevTools**

1. –û—Ç–∫—Ä–æ–π Telegram Web
2. –ù–∞–∂–º–∏ F12
3. –ù–∞–∂–º–∏ Ctrl+Shift+C
4. –ö–ª–∏–∫–Ω–∏ –Ω–∞ —á–∞—Ç —Å –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º–∏
5. –ü–æ—Å–º–æ—Ç—Ä–∏ HTML:

```html
<div class="dialog-subtitle-badge badge unread">1</div>
```

–°–µ–ª–µ–∫—Ç–æ—Ä: `.dialog-subtitle-badge.unread`

---

### **–ú–µ—Ç–æ–¥ 2: Selenium Helper**

```bash
python3 sequence_builder.py
# ‚Üí 5. Selenium Helper
# ‚Üí 4. –ê–≤—Ç–æ–ø–æ–∏—Å–∫ —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
```

---

## üêõ Troubleshooting

### **–ü—Ä–æ–±–ª–µ–º–∞: –ù–µ –Ω–∞—Ö–æ–¥–∏—Ç —á–∞—Ç—ã**

**–†–µ—à–µ–Ω–∏–µ:**
```yaml
wait_for_element: true
timeout: 5.0  # –£–≤–µ–ª–∏—á—å timeout
```

---

### **–ü—Ä–æ–±–ª–µ–º–∞: –ö–ª–∏–∫–∞–µ—Ç –Ω–µ –Ω–∞ —Ç–æ—Ç —á–∞—Ç**

**–†–µ—à–µ–Ω–∏–µ:**
```yaml
parent_selector: "../../.."  # –ü–æ–ø—Ä–æ–±—É–π –±–æ–ª—å—à–µ —É—Ä–æ–≤–Ω–µ–π
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π —Å–µ–ª–µ–∫—Ç–æ—Ä:
```yaml
selector: ".chat-item.has-unread"
```

---

### **–ü—Ä–æ–±–ª–µ–º–∞: –°–ª–∏—à–∫–æ–º –±—ã—Å—Ç—Ä–æ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è**

**–†–µ—à–µ–Ω–∏–µ:**
```yaml
duration: 10.0  # –£–≤–µ–ª–∏—á—å –ø–∞—É–∑—É –º–µ–∂–¥—É —á–∞—Ç–∞–º–∏
```

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

–í–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã —Ç—ã —É–≤–∏–¥–∏—à—å:

```
üîÑ –ü–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ 999999 —Ä–∞–∑

   ‚îÅ‚îÅ‚îÅ –ò—Ç–µ—Ä–∞—Ü–∏—è 1/999999 ‚îÅ‚îÅ‚îÅ
   üìç 1. –ù–∞–π—Ç–∏ —á–∞—Ç—ã —Å –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º–∏
   ‚úÖ –ù–∞–π–¥–µ–Ω–æ: 3 —á–∞—Ç–∞
   
   üìç 2. –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ —á–∞—Ç
   ‚úÖ –ù–∞–π–¥–µ–Ω —Ä–æ–¥–∏—Ç–µ–ª—å: ../..
   üñ±Ô∏è  Selenium –∫–ª–∏–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω
   
   üìç 3. –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è
   üîÑ –ü–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ 5 —Ä–∞–∑
   
      ‚îÅ‚îÅ‚îÅ –ò—Ç–µ—Ä–∞—Ü–∏—è 1/5 ‚îÅ‚îÅ‚îÅ
      ‚úÖ –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ!
      üìù –¢–µ–∫—Å—Ç: –ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?
      ü§ñ AI –æ—Ç–≤–µ—Ç: –û—Ç–ª–∏—á–Ω–æ! üòä
      ‚å®Ô∏è  Selenium –ø–µ—á–∞—Ç—å...
      ‚úÖ –ù–∞–π–¥–µ–Ω–æ! (1072, 908)
      
      ‚îÅ‚îÅ‚îÅ –ò—Ç–µ—Ä–∞—Ü–∏—è 2/5 ‚îÅ‚îÅ‚îÅ
      ‚è≠Ô∏è  –ù–µ—Ç –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
      ‚è∏Ô∏è  –ü–∞—É–∑–∞ 10 —Å–µ–∫—É–Ω–¥...
   
   üìç 4. –ü–∞—É–∑–∞ –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º —á–∞—Ç–æ–º
   ‚è∏Ô∏è  –ü–∞—É–∑–∞ 5.0—Å
   
   ‚îÅ‚îÅ‚îÅ –ò—Ç–µ—Ä–∞—Ü–∏—è 2/999999 ‚îÅ‚îÅ‚îÅ
   (—Å–ª–µ–¥—É—é—â–∏–π —á–∞—Ç)
```

---

## üéâ –ò—Ç–æ–≥

**–¢–µ–ø–µ—Ä—å –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–æ –í–°–ï–ú–ò —á–∞—Ç–∞–º–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!**

1. ‚úÖ –ù–∞—Ö–æ–¥–∏—Ç –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ
2. ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –º–µ–∂–¥—É —á–∞—Ç–∞–º–∏
3. ‚úÖ –û—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
4. ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ

**–ó–∞–ø—É—Å–∫–∞–π –∏ –Ω–∞—Å–ª–∞–∂–¥–∞–π—Å—è!** üöÄ

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã

- **`examples/telegram_multi_chat.yaml`** - –∫–æ–Ω—Ñ–∏–≥
- **`docs/TELEGRAM_SELECTORS.md`** - –≤—Å–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã
- **`docs/CREATE_TELEGRAM_TEMPLATE.md`** - —Å–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤
