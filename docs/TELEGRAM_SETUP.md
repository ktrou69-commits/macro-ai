# ü§ñ Telegram Auto Reply - –ü–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

## üìã –ß—Ç–æ —ç—Ç–æ?

**–ê–≤—Ç–æ–æ—Ç–≤–µ—Ç—á–∏–∫ –¥–ª—è Telegram Web** –∫–æ—Ç–æ—Ä—ã–π:
- ‚úÖ –ò–∑–≤–ª–µ–∫–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤—Ö–æ–¥—è—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ **Selenium**
- ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç —á–µ—Ä–µ–∑ **AI (Gemini)**
- ‚úÖ –ö–ª–∏–∫–∞–µ—Ç –ø–æ–ª–µ –≤–≤–æ–¥–∞ —á–µ—Ä–µ–∑ **Selenium**
- ‚úÖ –í–≤–æ–¥–∏—Ç –æ—Ç–≤–µ—Ç —á–µ—Ä–µ–∑ **PyAutoGUI**
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —á–µ—Ä–µ–∑ **Template Matching**

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### **1. –°–æ–∑–¥–∞–π —à–∞–±–ª–æ–Ω –∫–Ω–æ–ø–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏**

```bash
# 1. –û—Ç–∫—Ä–æ–π Telegram Web
./start_chrome_debug.sh
# –ü–µ—Ä–µ–π–¥–∏ –Ω–∞ https://web.telegram.org

# 2. –ù–∞–ø–∏—à–∏ —á—Ç–æ-—Ç–æ –≤ —á–∞—Ç–µ (—á—Ç–æ–±—ã –ø–æ—è–≤–∏–ª–∞—Å—å –∫–Ω–æ–ø–∫–∞)

# 3. –°–¥–µ–ª–∞–π —Å–∫—Ä–∏–Ω—à–æ—Ç –∫–Ω–æ–ø–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏
# Cmd+Shift+4 ‚Üí –≤—ã–¥–µ–ª–∏ —Ç–æ–ª—å–∫–æ –∫–Ω–æ–ø–∫—É (—Å–∏–Ω–∏–π –∫—Ä—É–≥ —Å —Å–∞–º–æ–ª–µ—Ç–∏–∫–æ–º)

# 4. –°–æ—Ö—Ä–∞–Ω–∏ —à–∞–±–ª–æ–Ω
mv ~/Desktop/Screenshot*.png templates/telegram_send_btn.png
```

**–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** `docs/CREATE_TELEGRAM_TEMPLATE.md`

---

### **2. –ù–∞—Å—Ç—Ä–æ–π API –∫–ª—é—á**

```bash
export GEMINI_API_KEY="—Ç–≤–æ–π_–∫–ª—é—á_–æ—Ç_gemini"
```

---

### **3. –ó–∞–ø—É—Å—Ç–∏ –∞–≤—Ç–æ–æ—Ç–≤–µ—Ç—á–∏–∫**

```bash
python3 macro_sequence.py \
  --config examples/telegram_auto_reply.yaml \
  --run telegram_auto_reply
```

---

## üìù –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### **–®–∞–≥ 1: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è (Selenium)**

```yaml
- action: selenium_extract
  selector: ".bubble.is-in .translatable-message"
  index: -1  # –ü–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
  save_to: last_message
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- Selenium –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- –ë–µ—Ä–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–µ (`index: -1`)
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–µ–∫—Å—Ç –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `last_message`

---

### **–®–∞–≥ 2: AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (Gemini)**

```yaml
- action: ai_generate
  model: "gemini-2.0-flash-exp"
  prompt: "–ù–∞–ø–∏—à–∏ –û–î–ò–ù –∫–æ—Ä–æ—Ç–∫–∏–π –æ—Ç–≤–µ—Ç –Ω–∞ —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ. –ú–∞–∫—Å–∏–º—É–º 30 —Å–∏–º–≤–æ–ª–æ–≤. –¢–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞, –±–µ–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏ –ø–æ—è—Å–Ω–µ–Ω–∏–π: {last_message}"
  save_to: reply_text
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- AI –ø–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ—Ä–æ—Ç–∫–∏–π –æ—Ç–≤–µ—Ç (–¥–æ 30 —Å–∏–º–≤–æ–ª–æ–≤)
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `reply_text`

**–ü—Ä–∏–º–µ—Ä:**
```
–í—Ö–æ–¥—è—â–µ–µ: "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?"
AI –æ—Ç–≤–µ—Ç: "–û—Ç–ª–∏—á–Ω–æ, —Å–ø–∞—Å–∏–±–æ! üòä"
```

---

### **–®–∞–≥ 3: –ö–ª–∏–∫ –ø–æ –ø–æ–ª—é –≤–≤–æ–¥–∞ (Selenium)**

```yaml
- action: selenium_click
  selector: ".input-message-input[contenteditable='true']"
  index: 0
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- Selenium –Ω–∞—Ö–æ–¥–∏—Ç –ø–æ–ª–µ –≤–≤–æ–¥–∞
- –ö–ª–∏–∫–∞–µ—Ç –ø–æ –Ω–µ–º—É (–∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç)

---

### **–®–∞–≥ 4: –í–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ (PyAutoGUI)**

```yaml
- action: type
  text: "{reply_text}"
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- PyAutoGUI –≤–≤–æ–¥–∏—Ç AI –æ—Ç–≤–µ—Ç
- –î–ª—è –∫–∏—Ä–∏–ª–ª–∏—Ü—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞ (Cmd+V)

---

### **–®–∞–≥ 5: –û—Ç–ø—Ä–∞–≤–∫–∞ (Template Matching)**

```yaml
- action: click
  template: templates/telegram_send_btn.png
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- Template Matching –Ω–∞—Ö–æ–¥–∏—Ç –∫–Ω–æ–ø–∫—É –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞ —ç–∫—Ä–∞–Ω–µ
- PyAutoGUI –∫–ª–∏–∫–∞–µ—Ç –ø–æ –Ω–µ–π

---

## üéØ –ü–æ–ª–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å

```yaml
sequences:
  telegram_auto_reply:
    steps:
    # 1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Chrome
    - action: selenium_connect
      browser: chrome
      debugger_address: "127.0.0.1:9222"
    
    # 2. –ò–∑–≤–ª–µ—á—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    - action: selenium_extract
      selector: ".bubble.is-in .translatable-message"
      index: -1
      save_to: last_message
    
    # 3. AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç
    - action: ai_generate
      model: "gemini-2.0-flash-exp"
      prompt: "–ù–∞–ø–∏—à–∏ –û–î–ò–ù –∫–æ—Ä–æ—Ç–∫–∏–π –æ—Ç–≤–µ—Ç: {last_message}"
      save_to: reply_text
    
    # 4. –ö–ª–∏–∫–Ω—É—Ç—å –ø–æ–ª–µ –≤–≤–æ–¥–∞
    - action: selenium_click
      selector: ".input-message-input[contenteditable='true']"
    
    # 5. –í–≤–µ—Å—Ç–∏ –æ—Ç–≤–µ—Ç
    - action: type
      text: "{reply_text}"
    
    # 6. –û—Ç–ø—Ä–∞–≤–∏—Ç—å
    - action: click
      template: templates/telegram_send_btn.png
```

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### **–ò–∑–º–µ–Ω–∏—Ç—å —Ç–æ–Ω –æ—Ç–≤–µ—Ç–æ–≤**

```yaml
variables:
  reply_tone: "–¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π"  # –∏–ª–∏ "—Ñ–æ—Ä–º–∞–ª—å–Ω—ã–π", "–≤–µ—Å–µ–ª—ã–π", "–∫–æ—Ä–æ—Ç–∫–∏–π"

# –í –ø—Ä–æ–º–ø—Ç–µ:
prompt: "–ù–∞–ø–∏—à–∏ {reply_tone} –æ—Ç–≤–µ—Ç: {last_message}"
```

---

### **–ò–∑–º–µ–Ω–∏—Ç—å –¥–ª–∏–Ω—É –æ—Ç–≤–µ—Ç–æ–≤**

```yaml
- action: ai_generate
  max_tokens: 50  # –ë—ã–ª–æ 20 (—É–≤–µ–ª–∏—á–∏—Ç—å –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤)
  prompt: "–ù–∞–ø–∏—à–∏ –æ—Ç–≤–µ—Ç –¥–æ 50 —Å–∏–º–≤–æ–ª–æ–≤: {last_message}"
```

---

### **–î–æ–±–∞–≤–∏—Ç—å —Ü–∏–∫–ª (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞)**

```yaml
- action: repeat
  times: 10  # –ü—Ä–æ–≤–µ—Ä—è—Ç—å 10 —Ä–∞–∑
  steps:
    # ... –≤—Å–µ —à–∞–≥–∏ ...
    
    - action: wait
      duration: 30.0  # –ü–∞—É–∑–∞ 30 —Å–µ–∫—É–Ω–¥ –º–µ–∂–¥—É –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **`docs/TELEGRAM_SELECTORS.md`** - –≤—Å–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –¥–ª—è Telegram
- **`docs/CREATE_TELEGRAM_TEMPLATE.md`** - –∫–∞–∫ —Å–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω –∫–Ω–æ–ø–∫–∏
- **`docs/SELENIUM_BUILDER_GUIDE.md`** - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Selenium
- **`examples/telegram_auto_reply.yaml`** - –≥–æ—Ç–æ–≤—ã–π –∫–æ–Ω—Ñ–∏–≥

---

## üêõ Troubleshooting

### **–ü—Ä–æ–±–ª–µ–º–∞: "–≠–ª–µ–º–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω"**

```bash
# –ü—Ä–æ–≤–µ—Ä—å —Å–µ–ª–µ–∫—Ç–æ—Ä:
python3 selenium_helper.py
# ‚Üí –í—ã–±–µ—Ä–∏ "4. –ê–≤—Ç–æ–ø–æ–∏—Å–∫ —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤"
```

---

### **–ü—Ä–æ–±–ª–µ–º–∞: "–ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"**

```yaml
# –£–≤–µ–ª–∏—á—å timeout:
timeout: 5.0

# –ò–ª–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–π —à–∞–±–ª–æ–Ω (—Å–º. docs/CREATE_TELEGRAM_TEMPLATE.md)
```

---

### **–ü—Ä–æ–±–ª–µ–º–∞: "AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤"**

```yaml
# –£–ª—É—á—à–∏ –ø—Ä–æ–º–ø—Ç:
prompt: "–ù–∞–ø–∏—à–∏ –û–î–ò–ù –∫–æ—Ä–æ—Ç–∫–∏–π –æ—Ç–≤–µ—Ç. –¢–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç, –±–µ–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤: {last_message}"
max_tokens: 20  # –£–º–µ–Ω—å—à–∏ –ª–∏–º–∏—Ç
```

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è –µ—Å—Ç—å **–ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–π Telegram –∞–≤—Ç–æ–æ—Ç–≤–µ—Ç—á–∏–∫**!

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. ‚úÖ –°–æ–∑–¥–∞–π —à–∞–±–ª–æ–Ω –∫–Ω–æ–ø–∫–∏ (`docs/CREATE_TELEGRAM_TEMPLATE.md`)
2. ‚úÖ –ó–∞–ø—É—Å—Ç–∏ `python3 macro_sequence.py --config examples/telegram_auto_reply.yaml --run telegram_auto_reply`
3. ‚úÖ –ù–∞–ø–∏—à–∏ —Å–µ–±–µ –≤ Telegram
4. ‚úÖ –°–º–æ—Ç—Ä–∏ –∫–∞–∫ –±–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç! üöÄ

---

## üí° –ò–¥–µ–∏ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

- üîÑ –î–æ–±–∞–≤–∏—Ç—å —Ü–∏–∫–ª –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- üéØ –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (—Ç–æ–ª—å–∫–æ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –º–∏–Ω—É—Ç—É)
- üìä –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –æ—Ç–≤–µ—Ç—ã
- ü§ñ –†–∞–∑–Ω—ã–µ —Å—Ç–∏–ª–∏ –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–æ–≤
- üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è

**–ò—Å–ø–æ–ª—å–∑—É–π Selenium Helper –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥ –¥—Ä—É–≥–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã!** üéØ
