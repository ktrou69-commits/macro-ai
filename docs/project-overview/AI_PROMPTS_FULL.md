# 🤖 Полные AI промпты системы

**Дата:** 11 ноября 2025  
**Файл:** `src/ai/prompt_updater.py`

Этот документ содержит все промпты, которые отправляются в Gemini AI для автоматического обновления документации.

---

## 📋 Содержание

1. [Промпт 1: Добавление новой платформы](#промпт-1-добавление-новой-платформы)
2. [Промпт 2: Обновление TEMPLATES_STRUCTURE.txt](#промпт-2-обновление-templates_structuretxt)
3. [Промпт 3: Обновление BEST_PRACTICES.txt](#промпт-3-обновление-best_practicestxt)
4. [Параметры API](#параметры-api)

---

## Промпт 1: Добавление новой платформы

### 📍 Где используется:
- **Файл:** `src/ai/prompt_updater.py`
- **Метод:** `add_platform(platform_name, description)`
- **Строки:** 401-451

### 🎯 Назначение:
Создает структуру названий для фото-шаблонов новой платформы на основе описания действий пользователя.

### 📝 Полный промпт:

```
Ты — эксперт по созданию структуры шаблонов для автоматизации.

ЗАДАЧА: Создать структуру названий для фото-шаблонов платформы {platform_name}

ОПИСАНИЕ ДЕЙСТВИЙ:
{description}

ТРЕБОВАНИЯ:

1. Проанализируй описание и выдели все UI элементы (кнопки, поля, иконки)
2. Создай структуру названий файлов в формате:
   Chrome-{platform_name}-<Element>-btn.png

3. Формат ответа:

📂 СТРУКТУРА ДЛЯ {PLATFORM_NAME}
================================================================================

Папка: templates/Chrome/{platform_name}/

Файлы для создания:
  • Chrome-{platform_name}-<Element1>-btn.png - <Описание>
  • Chrome-{platform_name}-<Element2>-btn.png - <Описание>
  ...

Краткие имена для DSL:
  • Chrome-{platform_name}-<Element1> - <Описание>
  • <Element1> (короткое имя) - <Описание>
  ...

Типичный сценарий:
  open ChromeApp
  wait 2s
  click ChromeNewTab
  wait 1s
  click ChromeSearchField
  type "{platform_name}.com"
  press enter
  wait 5s
  click Chrome-{platform_name}-<Element1>
  ...

================================================================================

ПРИМЕР (для TikTok):
  • Chrome-TikTok-Like-btn.png - Кнопка лайка
  • Chrome-TikTok-Comment-btn.png - Кнопка комментариев
  • Chrome-TikTok-ScrollDown-btn.png - Скролл вниз

Верни ТОЛЬКО структуру, без дополнительных объяснений!
```

### 📊 Пример использования:

**Вход:**
```python
platform_name = "YouTube"
description = "Захожу в YouTube, ищу видео, ставлю лайк, подписываюсь"
```

**Промпт (заполненный):**
```
Ты — эксперт по созданию структуры шаблонов для автоматизации.

ЗАДАЧА: Создать структуру названий для фото-шаблонов платформы YouTube

ОПИСАНИЕ ДЕЙСТВИЙ:
Захожу в YouTube, ищу видео, ставлю лайк, подписываюсь

ТРЕБОВАНИЯ:

1. Проанализируй описание и выдели все UI элементы (кнопки, поля, иконки)
2. Создай структуру названий файлов в формате:
   Chrome-YouTube-<Element>-btn.png

3. Формат ответа:

📂 СТРУКТУРА ДЛЯ YOUTUBE
================================================================================

Папка: templates/Chrome/YouTube/

Файлы для создания:
  • Chrome-YouTube-SearchField-btn.png - Поле поиска
  • Chrome-YouTube-Like-btn.png - Кнопка лайка
  • Chrome-YouTube-Subscribe-btn.png - Кнопка подписки
  ...
```

**Выход (ответ AI):**
```
📂 СТРУКТУРА ДЛЯ YOUTUBE
================================================================================

Папка: templates/Chrome/YouTube/

Файлы для создания:
  • Chrome-YouTube-SearchField-btn.png - Поле поиска видео
  • Chrome-YouTube-SearchButton-btn.png - Кнопка поиска
  • Chrome-YouTube-Like-btn.png - Кнопка лайка видео
  • Chrome-YouTube-Dislike-btn.png - Кнопка дизлайка
  • Chrome-YouTube-Subscribe-btn.png - Кнопка подписки на канал
  • Chrome-YouTube-Comment-btn.png - Кнопка комментариев
  • Chrome-YouTube-Share-btn.png - Кнопка "Поделиться"

Краткие имена для DSL:
  • Chrome-YouTube-SearchField - Поле поиска
  • SearchField (короткое имя) - Поле поиска
  • Chrome-YouTube-Like - Лайк
  • Like (короткое имя) - Лайк
  • Chrome-YouTube-Subscribe - Подписка
  • Subscribe (короткое имя) - Подписка

Типичный сценарий:
  open ChromeApp
  wait 2s
  click ChromeNewTab
  wait 1s
  click ChromeSearchField
  type "youtube.com"
  press enter
  wait 5s
  click Chrome-YouTube-SearchField
  type "название видео"
  press enter
  wait 3s
  click Chrome-YouTube-Like
  wait 1s
  click Chrome-YouTube-Subscribe
```

---

## Промпт 2: Обновление TEMPLATES_STRUCTURE.txt

### 📍 Где используется:
- **Файл:** `src/ai/prompt_updater.py`
- **Метод:** `ask_ai_to_update_structure(current_structure)`
- **Строки:** 113-170

### 🎯 Назначение:
Обновляет файл `TEMPLATES_STRUCTURE.txt` на основе текущих файлов в папке `templates/`.

### 📝 Полный промпт:

```
Ты — эксперт по документированию структуры шаблонов для автоматизации.

Твоя задача: создать красивый и понятный файл TEMPLATES_STRUCTURE.txt на основе текущих файлов.

{current_structure}

ТРЕБОВАНИЯ:

1. Формат файла:
================================================================================
ПОЛНАЯ СТРУКТУРА ШАБЛОНОВ - Описание всех кнопок и элементов
================================================================================

📂 templates/
│
├── Chrome/                              # Браузер Google Chrome
│   │
│   ├── ChromeBasicGuiButtons/           # Базовые кнопки Chrome
│   │   ├── ChromeApp-btn.png            # Иконка запуска Chrome
│   │   ├── ChromeNewTab-btn.png         # Кнопка "плюс" — открыть новую вкладку
│   │   └── ...
│   │
│   ├── TikTok/                          # Вкладка TikTok
│   │   ├── Chrome-TikTok-Like-btn.png   # Кнопка лайка видео
│   │   └── ...
│   │
│   └── YouTube/                         # Вкладка YouTube
│       └── ...

2. Краткие имена для DSL:
================================================================================
КРАТКИЕ ИМЕНА ШАБЛОНОВ (для использования в DSL)
================================================================================

Chrome - Базовые:
  • ChromeApp                - Запуск Chrome
  • ChromeNewTab             - Новая вкладка
  ...

3. Типичные сценарии:
================================================================================
ТИПИЧНЫЕ СЦЕНАРИИ ИСПОЛЬЗОВАНИЯ
================================================================================

1. Открыть Chrome и перейти на сайт:
   open ChromeApp
   wait 2s
   click ChromeSearchField
   ...

ВАЖНО:
- Добавь понятные комментарии для каждого файла
- Группируй по платформам (Chrome, TikTok, YouTube, ...)
- Используй эмодзи для красоты
- Добавь примеры использования

Верни ТОЛЬКО содержимое файла, без дополнительных объяснений!
```

### 📊 Пример использования:

**Вход:**
```python
current_structure = """
📂 ТЕКУЩАЯ СТРУКТУРА ШАБЛОНОВ:

📁 Chrome/ChromeBasicGuiButtons/ (3 файлов)
   • ChromeApp (ChromeApp-btn.png)
   • ChromeNewTab (ChromeNewTab.png)
   • ChromeSearchField (ChromeSearchField.png)

📁 Chrome/TikTok/ (5 файлов)
   • Chrome-TikTok-Like (Chrome-TikTok-Like-btn.png)
   • Chrome-TikTok-Comment (Chrome-TikTok-Comment.png)
   • Chrome-TikTok-ScrollDown (Chrome-TikTok-ScrollDown.png)
   • Chrome-TikTok-Search (Chrome-TikTok-Search.png)
   • Chrome-TikTok-Share (Chrome-TikTok-Share.png)
"""
```

**Выход (ответ AI):**
```
================================================================================
ПОЛНАЯ СТРУКТУРА ШАБЛОНОВ - Описание всех кнопок и элементов
================================================================================

📂 templates/
│
├── Chrome/                              # Браузер Google Chrome
│   │
│   ├── ChromeBasicGuiButtons/           # Базовые кнопки Chrome
│   │   ├── ChromeApp-btn.png            # Иконка запуска Chrome
│   │   ├── ChromeNewTab.png             # Кнопка "плюс" — открыть новую вкладку
│   │   └── ChromeSearchField.png        # Адресная строка браузера
│   │
│   └── TikTok/                          # Платформа TikTok
│       ├── Chrome-TikTok-Like-btn.png   # Кнопка лайка видео (сердечко)
│       ├── Chrome-TikTok-Comment.png    # Кнопка комментариев (облачко)
│       ├── Chrome-TikTok-ScrollDown.png # Стрелка вниз для скролла
│       ├── Chrome-TikTok-Search.png     # Кнопка поиска (лупа)
│       └── Chrome-TikTok-Share.png      # Кнопка "Поделиться" (стрелка)

================================================================================
КРАТКИЕ ИМЕНА ШАБЛОНОВ (для использования в DSL)
================================================================================

Chrome - Базовые:
  • ChromeApp                - Запуск Chrome
  • ChromeNewTab             - Новая вкладка
  • ChromeSearchField        - Адресная строка

TikTok:
  • Chrome-TikTok-Like       - Лайк видео
  • Chrome-TikTok-Comment    - Комментарии
  • Chrome-TikTok-ScrollDown - Скролл вниз
  • Chrome-TikTok-Search     - Поиск
  • Chrome-TikTok-Share      - Поделиться

================================================================================
ТИПИЧНЫЕ СЦЕНАРИИ ИСПОЛЬЗОВАНИЯ
================================================================================

1. Открыть Chrome и перейти на TikTok:
   open ChromeApp
   wait 2s
   click ChromeNewTab
   wait 1s
   click ChromeSearchField
   type "tiktok.com"
   press enter
   wait 5s

2. Поставить лайк в TikTok:
   click Chrome-TikTok-Like
   wait 1.5s

3. Поставить 5 лайков подряд:
   repeat 5:
     click Chrome-TikTok-Like
     wait 1.5s
     click Chrome-TikTok-ScrollDown
     wait 2s
```

---

## Промпт 3: Обновление BEST_PRACTICES.txt

### 📍 Где используется:
- **Файл:** `src/ai/prompt_updater.py`
- **Метод:** `ask_ai_to_update_best_practices(structure)`
- **Строки:** 212-241

### 🎯 Назначение:
Обновляет файл `BEST_PRACTICES.txt` с правилами использования шаблонов.

### 📝 Полный промпт:

```
Ты — эксперт по созданию best practices для автоматизации.

Обнови файл BEST_PRACTICES.txt на основе новой структуры шаблонов.

ТЕКУЩАЯ СТРУКТУРА:
{structure}

ТЕКУЩИЕ BEST PRACTICES (для референса):
{current_practices[:2000]}  # Первые 2000 символов

ТРЕБОВАНИЯ:

1. Сохрани все важные правила из текущих practices
2. Добавь новые правила для новых платформ/кнопок
3. Формат:
   ✅ ПРАВИЛЬНО: <пример>
   ❌ НЕПРАВИЛЬНО: <пример>
   ПОЧЕМУ: <объяснение>

4. Обязательные секции:
   - CHROME - Базовые операции
   - TIKTOK - Работа с видео
   - YOUTUBE - Поиск и просмотр
   - ОБЩИЕ ПРАВИЛА - Ожидания
   - ОБРАБОТКА ОШИБОК - Try/Catch

5. Используй эмодзи и форматирование

Верни ТОЛЬКО содержимое файла!
```

### 📊 Пример использования:

**Вход:**
```python
structure = """
📁 Chrome/TikTok/ (5 файлов)
   • Chrome-TikTok-Like
   • Chrome-TikTok-Comment
   • Chrome-TikTok-ScrollDown
"""

current_practices = """
CHROME - Базовые операции:
✅ ПРАВИЛЬНО: Всегда создавай новую вкладку
open ChromeApp
wait 2s
click ChromeNewTab
...
"""
```

**Выход (ответ AI):**
```
================================================================================
ЛУЧШИЕ ПРАКТИКИ ИСПОЛЬЗОВАНИЯ ШАБЛОНОВ
================================================================================

CHROME - Базовые операции
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✅ ПРАВИЛЬНО: Всегда создавай новую вкладку
────────────────────────────────────────────────────────────────────────────────
open ChromeApp
wait 2s
click ChromeNewTab          # ← ОБЯЗАТЕЛЬНО!
wait 1s
click ChromeSearchField
type "tiktok.com"
press enter
wait 5s

❌ НЕПРАВИЛЬНО: Без новой вкладки
────────────────────────────────────────────────────────────────────────────────
open ChromeApp
wait 2s
click ChromeSearchField     # ← ОШИБКА! Может открыться не там
type "tiktok.com"

ПОЧЕМУ: Chrome может открыться на стартовой странице или последней вкладке.
        Новая вкладка гарантирует чистое состояние.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

TIKTOK - Работа с видео
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✅ ПРАВИЛЬНО: Лайк с паузой и скроллом
────────────────────────────────────────────────────────────────────────────────
repeat 5:
  click Chrome-TikTok-Like
  wait 1.5s                 # ← Пауза для анимации
  click Chrome-TikTok-ScrollDown
  wait 2s                   # ← Загрузка следующего видео

❌ НЕПРАВИЛЬНО: Без пауз
────────────────────────────────────────────────────────────────────────────────
repeat 5:
  click Chrome-TikTok-Like  # ← Слишком быстро!
  click Chrome-TikTok-ScrollDown

ПОЧЕМУ: TikTok нужно время на анимацию лайка и загрузку следующего видео.
        Без пауз лайки могут не засчитаться.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

ОБЩИЕ ПРАВИЛА - Ожидания
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Рекомендуемые паузы:
  • После click → wait 1s
  • После type → wait 0.5s
  • После press enter → wait 5s (загрузка страницы)
  • После click Like → wait 1.5s (анимация)
  • После scroll → wait 2s (загрузка контента)

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

## Параметры API

### 🔧 Конфигурация:

**Файл:** `.env`
```bash
GEMINI_API_KEY=your-key-here
GEMINI_MODEL=gemini-1.5-flash
```

**Загрузка:**
```python
from src.utils.api_config import api_config

# Используется в промптах:
client = genai.Client(api_key=api_config.gemini_key)
response = client.models.generate_content(
    model=api_config.gemini_model,  # gemini-1.5-flash
    contents=prompt
)
```

---

### 📊 Статистика промптов:

| Промпт | Размер | Токены | Время | Стоимость |
|--------|--------|--------|-------|-----------|
| Добавление платформы | ~1,500 символов | ~375 | 3-5с | $0.002 |
| Обновление структуры | ~2,000 символов | ~500 | 4-6с | $0.003 |
| Обновление practices | ~3,000 символов | ~750 | 5-8с | $0.004 |

**Итого за полное обновление:** ~$0.009 (меньше цента!)

---

### 🎯 Модели и их особенности:

| Модель | Скорость | Качество | Квота | Рекомендация |
|--------|----------|----------|-------|--------------|
| `gemini-1.5-flash` | Быстрая | Отличное | Нормальная | ✅ Рекомендуется |
| `gemini-2.0-flash` | Быстрая | Хорошее | Ограничена | ⚠️ Может исчерпаться |
| `gemini-2.5-flash` | Очень быстрая | Отличное | Хорошая | ✅ Лучший выбор |
| `gemini-2.5-flash-lite` | Самая быстрая | Хорошее | Отличная | ✅ Для простых задач |
| `gemini-2.5-pro` | Медленная | Превосходное | Ограничена | 🎯 Для сложных задач |

---

## 🔄 Workflow использования промптов

### 1. Добавление новой платформы:

```bash
python3 src/main.py
→ 8. Обновление промптов
→ 2. Добавить новую платформу
→ YouTube
→ Захожу в YouTube, ищу видео, ставлю лайк
```

**Что происходит:**
1. Промпт 1 → AI создает структуру
2. Сохраняется в `templates/YouTube_STRUCTURE.txt`
3. Пользователь создает шаблоны
4. Запускает обновление промптов

---

### 2. Обновление после добавления шаблонов:

```bash
python3 src/main.py
→ 8. Обновление промптов
→ 1. Обновить все промпты
```

**Что происходит:**
1. Сканирование `templates/` → список файлов
2. Промпт 2 → AI обновляет `TEMPLATES_STRUCTURE.txt`
3. Промпт 3 → AI обновляет `BEST_PRACTICES.txt`
4. Регенерация `DSL_REFERENCE.txt`

---

## 📝 Итоги

**Система использует 3 промпта:**
1. **Добавление платформы** - создание структуры
2. **Обновление структуры** - документация файлов
3. **Обновление practices** - правила использования

**Все промпты:**
- ✅ Централизованы в `prompt_updater.py`
- ✅ Используют единую конфигурацию API
- ✅ Оптимизированы по размеру
- ✅ Дают стабильные результаты

**Стоимость:** ~$0.009 за полное обновление (меньше цента!)

**Время:** 10-20 секунд на все операции

**Качество:** Стабильное, проверенное на практике ✨
