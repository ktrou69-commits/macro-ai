# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: API –∫–ª—é—á —Ç–µ–ø–µ—Ä—å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω —á–µ—Ä–µ–∑ .env

**–ü—Ä–æ–±–ª–µ–º–∞:** AI —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–ª–∏ –Ω–æ–≤—ã–π API –∫–ª—é—á –∏–∑ `.env`

**–†–µ—à–µ–Ω–∏–µ:** –í—Å–µ 3 —Ñ–∞–π–ª–∞ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç `api_config` –≤–º–µ—Å—Ç–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ `_load_env()`

---

## üîß –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. **utils/ai_macro_generator.py**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π `_load_env()` –∫–æ—Ç–æ—Ä—ã–π –º–æ–≥ –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

**–ë—ã–ª–æ:**
```python
def __init__(self, project_root: Path):
    self._load_env()
    self.gemini_key = os.getenv("GEMINI_API_KEY")

def _load_env(self):
    # –°–≤–æ–π –ø–∞—Ä—Å–µ—Ä .env
    if key and value and not os.getenv(key):  # ‚Üê –ù–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç!
        os.environ[key] = value
```

**–°—Ç–∞–ª–æ:**
```python
from utils.api_config import api_config

def __init__(self, project_root: Path):
    # API –∫–ª—é—á–∏ –∏–∑ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    self.gemini_key = api_config.gemini_key
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–π –∫–ª—é—á –∏–∑ `.env`

---

### 2. **utils/ai_macro_generator_legacy.py**
**–ü—Ä–æ–±–ª–µ–º–∞:** –¢–∞ –∂–µ - —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π `_load_env()`

**–ë—ã–ª–æ:**
```python
def __init__(self, project_root: Path):
    self._load_env()
    self.gemini_key = os.getenv("GEMINI_API_KEY")
```

**–°—Ç–∞–ª–æ:**
```python
from utils.api_config import api_config

def __init__(self, project_root: Path):
    self.gemini_key = api_config.gemini_key
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–π –∫–ª—é—á –∏–∑ `.env`

---

### 3. **utils/prompt_updater.py**
**–ü—Ä–æ–±–ª–µ–º–∞:** –¢–∞ –∂–µ - —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π `_load_env()`

**–ë—ã–ª–æ:**
```python
def __init__(self, project_root: Path):
    self._load_env()
    self.gemini_key = os.getenv("GEMINI_API_KEY")
```

**–°—Ç–∞–ª–æ:**
```python
from utils.api_config import api_config

def __init__(self, project_root: Path):
    self.gemini_key = api_config.gemini_key
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–π –∫–ª—é—á –∏–∑ `.env`

---

## üìä –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –§–∞–π–ª | –î–æ | –ü–æ—Å–ª–µ | –°—Ç–∞—Ç—É—Å |
|------|-----|-------|--------|
| utils/ai_macro_generator.py | –°–≤–æ–π _load_env() | api_config | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| utils/ai_macro_generator_legacy.py | –°–≤–æ–π _load_env() | api_config | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| utils/prompt_updater.py | –°–≤–æ–π _load_env() | api_config | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |

**–ò—Ç–æ–≥–æ:**
- ‚úÖ 3 —Ñ–∞–π–ª–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- ‚úÖ –£–¥–∞–ª–µ–Ω–æ 3 –º–µ—Ç–æ–¥–∞ `_load_env()`
- ‚úÖ –í—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `api_config`
- ‚úÖ 100% —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è

---

## üéØ –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ

### –ü—Ä–æ–±–ª–µ–º–∞ —Å `_load_env()`:
```python
def _load_env(self):
    # ...
    if key and value and not os.getenv(key):  # ‚Üê –ü—Ä–æ–±–ª–µ–º–∞!
        os.environ[key] = value
```

**–ü—Ä–æ–±–ª–µ–º–∞:** `not os.getenv(key)` - –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –µ—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞!

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. –ó–∞–ø—É—Å—Ç–∏–ª–∏ —Å–∫—Ä–∏–ø—Ç ‚Üí –∑–∞–≥—Ä—É–∑–∏–ª—Å—è —Å—Ç–∞—Ä—ã–π –∫–ª—é—á
2. –ò–∑–º–µ–Ω–∏–ª–∏ `.env` ‚Üí –Ω–æ–≤—ã–π –∫–ª—é—á
3. –ó–∞–ø—É—Å—Ç–∏–ª–∏ —Å–Ω–æ–≤–∞ ‚Üí **—Å—Ç–∞—Ä—ã–π –∫–ª—é—á –æ—Å—Ç–∞–ª—Å—è!** (–Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–ª—Å—è)

### –†–µ—à–µ–Ω–∏–µ —Å `api_config`:
```python
from utils.api_config import api_config

# api_config.load_env() –≤—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç
self.gemini_key = api_config.gemini_key
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –í—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–π –∫–ª—é—á
- ‚úÖ –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã
- ‚úÖ –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
- ‚úÖ –õ–µ–≥–∫–æ –æ—Ç–ª–∞–¥–∏—Ç—å

---

## üîÑ –ö–∞–∫ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ò–∑–º–µ–Ω—è–µ—à—å `.env`:
```bash
nano .env
# GEMINI_API_KEY=NEW_KEY_HERE
```

### 2. –ó–∞–ø—É—Å–∫–∞–µ—à—å –ª—é–±–æ–π —Å–∫—Ä–∏–ø—Ç:
```bash
python3 utils/ai_macro_generator.py "—Ç–µ—Å—Ç"
python3 utils/prompt_updater.py --update
python3 main.py  # ‚Üí 8. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤
```

### 3. –í—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –Ω–æ–≤—ã–π –∫–ª—é—á:
```python
from utils.api_config import api_config
# api_config.gemini_key = "NEW_KEY_HERE" ‚úÖ
```

**–†–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!** üéâ

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫–ª—é—á –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
```bash
python3 -c "from utils.api_config import api_config; print(api_config.gemini_key[:20])"
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
AIzaSyBGlFjt6bKJLJqc
```

### –¢–µ—Å—Ç 2: AI –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä
```bash
python3 utils/ai_macro_generator.py "—Ç–µ—Å—Ç"
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
ü§ñ –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–´–ô AI –ì–ï–ù–ï–†–ê–¢–û–†
ü§ñ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ Google Gemini...
```

### –¢–µ—Å—Ç 3: Prompt Updater
```bash
python3 utils/prompt_updater.py --update
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤
üìÇ –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ templates/...
```

### –¢–µ—Å—Ç 4: –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
```bash
python3 main.py
# ‚Üí 8. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤ (AI)
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ: –ö–≤–æ—Ç–∞ API

### –û—à–∏–±–∫–∞ 429 RESOURCE_EXHAUSTED

**–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!** –≠—Ç–æ –∑–Ω–∞—á–∏—Ç —á—Ç–æ:
- ‚úÖ API –∫–ª—é—á **—Ä–∞–±–æ—Ç–∞–µ—Ç**
- ‚úÖ –°–∫—Ä–∏–ø—Ç **–ø–æ–¥–∫–ª—é—á–∏–ª—Å—è** –∫ Gemini
- ‚ùå –ù–æ –∫–≤–æ—Ç–∞ **–∏—Å—á–µ—Ä–ø–∞–Ω–∞**

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á: https://makersuite.google.com/app/apikey
2. –û–±–Ω–æ–≤–∏—Ç–µ `.env`:
   ```bash
   nano .env
   # GEMINI_API_KEY=new-key-here
   ```
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç

**–ò–ª–∏ –ø–æ–¥–æ–∂–¥–∏—Ç–µ 30 —Å–µ–∫—É–Ω–¥** - –∫–≤–æ—Ç–∞ –æ–±–Ω–æ–≤–∏—Ç—Å—è.

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
- **utils/api_config.py** - –ú–æ–¥—É–ª—å –¥–ª—è API –∫–ª—é—á–µ–π
- **.env** - –§–∞–π–ª —Å –∫–ª—é—á–∞–º–∏

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- **API_CONFIG_GUIDE.md** - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- **API_USAGE_SUMMARY.md** - –°–≤–æ–¥–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **API_FIX_SUMMARY.md** - –≠—Ç–æ—Ç —Ñ–∞–π–ª

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- **utils/ai_macro_generator.py** - AI –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä
- **utils/ai_macro_generator_legacy.py** - Legacy –≤–µ—Ä—Å–∏—è
- **utils/prompt_updater.py** - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤

---

## ‚úÖ –ò—Ç–æ–≥

### –ß—Ç–æ –±—ã–ª–æ:
- ‚ùå 3 —Ñ–∞–π–ª–∞ —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º `_load_env()`
- ‚ùå –ù–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- ‚ùå –°—Ç–∞—Ä—ã–π –∫–ª—é—á –º–æ–≥ –æ—Å—Ç–∞—Ç—å—Å—è –≤ –ø–∞–º—è—Ç–∏
- ‚ùå –ù–æ–≤—ã–π –∫–ª—é—á –Ω–µ –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–ª—Å—è

### –ß—Ç–æ —Å—Ç–∞–ª–æ:
- ‚úÖ –í—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `api_config`
- ‚úÖ –í—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–π –∫–ª—é—á –∏–∑ `.env`
- ‚úÖ –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã
- ‚úÖ –ú–µ–Ω—è–µ—à—å –≤ `.env` ‚Üí —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–µ–∑–¥–µ

---

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–¢–µ–ø–µ—Ä—å –º–µ–Ω—è–µ—à—å API –∫–ª—é—á –≤ `.env` ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–æ –≤—Å–µ—Ö 9 —Ñ–∞–π–ª–∞—Ö!**

**–§—É–Ω–∫—Ü–∏–∏ –∏–∑ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é:**
- ‚úÖ 6. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (AI)
- ‚úÖ 7. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (AI)
- ‚úÖ 8. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤ (AI)

**–í—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–π –∫–ª—é—á –∏–∑ `.env`!** üöÄ
