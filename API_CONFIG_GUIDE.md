# üîë –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è API –∫–ª—é—á–µ–π

**–í—Å–µ API –∫–ª—é—á–∏ —Ç–µ–ø–µ—Ä—å –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ - `.env` —Ñ–∞–π–ª!**

---

## üéØ –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ

**–ú–µ–Ω—è–µ—à—å –∫–ª—é—á –≤ `.env` ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–µ–∑–¥–µ!**

–ë–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–æ –∏—Å–∫–∞—Ç—å –∏ –º–µ–Ω—è—Ç—å –∫–ª—é—á–∏ –≤ 10+ —Ñ–∞–π–ª–∞—Ö.

---

## üìÅ –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –∫–ª—é—á–∏

### `.env` —Ñ–∞–π–ª (–∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞)
```bash
# Gemini API Key
GEMINI_API_KEY=AIzaSyBGlFjt6bKJLJqcsavArM6wb7voH111gc8

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
AI_MODEL=gemini-pro
AI_TEMPERATURE=0.7
AI_MAX_TOKENS=100
```

**–≠—Ç–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –º–µ—Å—Ç–æ –≥–¥–µ –Ω—É–∂–Ω–æ –º–µ–Ω—è—Ç—å –∫–ª—é—á–∏!**

---

## üîß –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–æ–¥–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ APIConfig (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```python
from utils.api_config import APIConfig

# –°–æ–∑–¥–∞—ë–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç .env)
config = APIConfig()

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
if config.has_gemini():
    # –ü–æ–ª—É—á–∞–µ–º –∫–ª—é—á
    api_key = config.get_gemini_key()
    
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º
    from google import genai
    client = genai.Client(api_key=api_key)
else:
    print("‚ùå GEMINI_API_KEY –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ –≥–ª–æ–±–∞–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä

```python
from utils.api_config import api_config

# –ò—Å–ø–æ–ª—å–∑—É–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä
if api_config.has_gemini():
    client = genai.Client(api_key=api_config.gemini_key)
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏–∏-—Ö–µ–ª–ø–µ—Ä—ã

```python
from utils.api_config import get_gemini_key

# –ü–æ–ª—É—á–∞–µ–º –∫–ª—é—á –Ω–∞–ø—Ä—è–º—É—é
api_key = get_gemini_key()
if api_key:
    client = genai.Client(api_key=api_key)
```

---

## üìä –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

### –§–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `.env`:

1. **utils/ai_macro_generator.py** - AI –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –º–∞–∫—Ä–æ—Å–æ–≤
2. **utils/ai_macro_generator_legacy.py** - Legacy –≤–µ—Ä—Å–∏—è
3. **utils/prompt_updater.py** - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤
4. **utils/ai_dom_analyzer.py** - AI –∞–Ω–∞–ª–∏–∑ DOM
5. **utils/dom_selector_tool.py** - DOM —Å–µ–ª–µ–∫—Ç–æ—Ä
6. **main.py** - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
7. **macro_sequence.py** - –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∞–∫—Ä–æ—Å–æ–≤
8. **tests/test_gemini.py** - –¢–µ—Å—Ç—ã

**–í—Å–µ —ç—Ç–∏ —Ñ–∞–π–ª—ã —á–∏—Ç–∞—é—Ç –∫–ª—é—á –∏–∑ `.env` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!**

---

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### –î–æ:
```python
# –í –∫–∞–∂–¥–æ–º —Ñ–∞–π–ª–µ:
api_key = "AIzaSyBGlFjt6bKJLJqcsavArM6wb7voH111gc8"  # ‚ùå –•–∞—Ä–¥–∫–æ–¥
api_key = os.getenv("GEMINI_API_KEY", "default-key")  # ‚ùå –î–µ—Ñ–æ–ª—Ç
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå –ù—É–∂–Ω–æ –º–µ–Ω—è—Ç—å –≤ 10+ —Ñ–∞–π–ª–∞—Ö
- ‚ùå –õ–µ–≥–∫–æ –∑–∞–±—ã—Ç—å –æ–±–Ω–æ–≤–∏—Ç—å
- ‚ùå –ö–ª—é—á–∏ –≤ –∫–æ–¥–µ (–Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ)
- ‚ùå –†–∞–∑–Ω—ã–µ –¥–µ—Ñ–æ–ª—Ç—ã –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö

### –ü–æ—Å–ª–µ:
```python
# –í .env (1 –º–µ—Å—Ç–æ):
GEMINI_API_KEY=your-new-key

# –í –∫–æ–¥–µ (–≤–µ–∑–¥–µ –æ–¥–∏–Ω–∞–∫–æ–≤–æ):
from utils.api_config import api_config
client = genai.Client(api_key=api_config.gemini_key)
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ú–µ–Ω—è–µ—à—å –≤ 1 –º–µ—Å—Ç–µ (`.env`)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–µ–∑–¥–µ
- ‚úÖ –ö–ª—é—á–∏ –Ω–µ –≤ –∫–æ–¥–µ (–±–µ–∑–æ–ø–∞—Å–Ω–æ)
- ‚úÖ –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã

---

## üîÑ –ö–∞–∫ —Å–º–µ–Ω–∏—Ç—å API –∫–ª—é—á

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ `.env`
```bash
nano .env
```

### 2. –ò–∑–º–µ–Ω–∏—Ç–µ –∫–ª—é—á
```bash
# –ë—ã–ª–æ:
GEMINI_API_KEY=AIzaSyBGlFjt6bKJLJqcsavArM6wb7voH111gc8

# –°—Ç–∞–ª–æ:
GEMINI_API_KEY=AIzaSyC_NEW_KEY_HERE
```

### 3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª

**–ì–æ—Ç–æ–≤–æ!** –í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –Ω–æ–≤—ã–π –∫–ª—é—á.

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–ª—é—á–µ–π
```bash
python3 utils/api_config.py
```

**–í—ã–≤–æ–¥:**
```
================================================================================
                            API Configuration Test
================================================================================

üìä –°—Ç–∞—Ç—É—Å API –∫–ª—é—á–µ–π:
   Gemini:    ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
   OpenAI:    ‚ùå –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
   Anthropic: ‚ùå –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

üìÅ –ü—É—Ç—å –∫ .env: /Users/kostya/Desktop/local-macros/.env

‚úÖ Gemini –∫–ª—é—á: AIzaSyBGlFjt6bKJLJqc...

================================================================================
```

### –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Gemini API
```bash
python3 tests/test_gemini.py
```

**–í—ã–≤–æ–¥:**
```
ü§ñ –¢–µ—Å—Ç Gemini API (–Ω–æ–≤—ã–π SDK)

‚úÖ Gemini API –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω

üí¨ –¢–µ—Å—Ç–æ–≤—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –û—Ç–ª–∏—á–Ω–æ–µ –≤–∏–¥–µ–æ! –û—á–µ–Ω—å –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å üëç

üîÑ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞...

‚úÖ –£—Å–ø–µ—à–Ω–æ!
ü§ñ AI –æ—Ç–≤–µ—Ç: –°–ø–∞—Å–∏–±–æ –±–æ–ª—å—à–æ–µ! –†–∞–¥ —á—Ç–æ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å! üòä

üéâ Gemini API —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!
```

---

## üìö API –º–µ—Ç–æ–¥—ã

### APIConfig –∫–ª–∞—Å—Å

```python
config = APIConfig()

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
config.has_gemini()     # bool
config.has_openai()     # bool
config.has_anthropic()  # bool

# –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–µ–π (—Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π)
config.get_gemini_key()     # str –∏–ª–∏ ValueError
config.get_openai_key()     # str –∏–ª–∏ ValueError
config.get_anthropic_key()  # str –∏–ª–∏ ValueError

# –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø (–º–æ–∂–µ—Ç –±—ã—Ç—å None)
config.gemini_key      # Optional[str]
config.openai_key      # Optional[str]
config.anthropic_key   # Optional[str]

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ AI
config.ai_model        # str
config.ai_temperature  # float
config.ai_max_tokens   # int

# –í—ã–≤–æ–¥ —Å—Ç–∞—Ç—É—Å–∞
config.print_status()
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
```bash
# .env —Ñ–∞–π–ª (–Ω–µ –≤ git)
GEMINI_API_KEY=your-key-here
```

```python
# –í –∫–æ–¥–µ
from utils.api_config import api_config
client = genai.Client(api_key=api_config.gemini_key)
```

### ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:
```python
# –•–∞—Ä–¥–∫–æ–¥ –≤ –∫–æ–¥–µ
api_key = "AIzaSyBGlFjt6bKJLJqcsavArM6wb7voH111gc8"
```

**–ü–æ—á–µ–º—É –ø–ª–æ—Ö–æ:**
- –ö–ª—é—á –≤–∏–¥–µ–Ω –≤ git –∏—Å—Ç–æ—Ä–∏–∏
- –ù–µ–ª—å–∑—è –±—ã—Å—Ç—Ä–æ —Å–º–µ–Ω–∏—Ç—å
- –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ

---

## üÜò Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: "GEMINI_API_KEY –Ω–µ –Ω–∞–π–¥–µ–Ω"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ .env —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
ls -la .env

# 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
cat .env

# 3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∫–ª—é—á –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
grep GEMINI_API_KEY .env

# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç
python3 main.py
```

### –ü—Ä–æ–±–ª–µ–º–∞: "–ö–ª—é—á –Ω–µ –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç—Å—è"

**–†–µ—à–µ–Ω–∏–µ:**
```python
# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å .env
from utils.api_config import load_env
load_env()

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
from utils.api_config import api_config
print(api_config.gemini_key)
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Quota exceeded"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á: https://makersuite.google.com/app/apikey
2. –û–±–Ω–æ–≤–∏—Ç–µ `.env`:
   ```bash
   GEMINI_API_KEY=new-key-here
   ```
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç

---

## üìù –ú–∏–≥—Ä–∞—Ü–∏—è —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–¥–∞

### –ë—ã–ª–æ:
```python
import os
api_key = os.getenv("GEMINI_API_KEY")
if not api_key:
    print("‚ùå –ö–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω")
    return
client = genai.Client(api_key=api_key)
```

### –°—Ç–∞–ª–æ:
```python
from utils.api_config import api_config

if not api_config.has_gemini():
    print("‚ùå –ö–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω")
    return

client = genai.Client(api_key=api_config.gemini_key)
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ú–µ–Ω—å—à–µ –∫–æ–¥–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ .env
- –£–¥–æ–±–Ω—ã–µ –º–µ—Ç–æ–¥—ã –ø—Ä–æ–≤–µ—Ä–∫–∏
- –ï–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å –≤–µ–∑–¥–µ

---

## üéØ –ò—Ç–æ–≥

### –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ:
**–ú–µ–Ω—è–π –∫–ª—é—á–∏ —Ç–æ–ª—å–∫–æ –≤ `.env` - –æ–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ö–≤–∞—Ç—è—Ç—Å—è –≤–µ–∑–¥–µ!**

### –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
```python
from utils.api_config import api_config

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
if api_config.has_gemini():
    # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
    client = genai.Client(api_key=api_config.gemini_key)
```

### –ì–¥–µ –º–µ–Ω—è—Ç—å:
```bash
# –¢–æ–ª—å–∫–æ –∑–¥–µ—Å—å:
nano .env

# GEMINI_API_KEY=your-new-key
```

**–ì–æ—Ç–æ–≤–æ!** üéâ
