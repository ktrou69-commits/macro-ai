#!/usr/bin/env python3
"""
–î–µ–º–æ GUI –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
"""

import sys
from pathlib import Path
from PySide6.QtWidgets import QApplication
from PySide6.QtCore import Qt

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É
project_root = Path(__file__).parent
sys.path.insert(0, str(project_root))

def test_voice_widget_standalone():
    """–¢–µ—Å—Ç –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –≤–∏–¥–∂–µ—Ç–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –æ–∫–Ω–µ"""
    print("üé§ –ó–∞–ø—É—Å–∫ –¥–µ–º–æ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –≤–∏–¥–∂–µ—Ç–∞...")
    
    app = QApplication(sys.argv)
    
    try:
        from gui.views.voice_assistant_widget import VoiceAssistantWidget
        
        # –°–æ–∑–¥–∞–µ–º –≤–∏–¥–∂–µ—Ç
        widget = VoiceAssistantWidget()
        widget.setWindowTitle("üé§ –ì–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç - –î–µ–º–æ")
        widget.resize(800, 600)
        
        # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–∫–Ω–æ
        widget.show()
        
        print("‚úÖ –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–∏–¥–∂–µ—Ç –∑–∞–ø—É—â–µ–Ω")
        print("üí° –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è")
        print("üîß –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:")
        print("   ‚Ä¢ –ù–∞—á–∞—Ç—å/–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ")
        print("   ‚Ä¢ –¢–µ—Å—Ç –∫–æ–º–∞–Ω–¥—ã")
        print("   ‚Ä¢ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–æ–ª–æ—Å–∞")
        print("   ‚Ä¢ –õ–æ–≥ –¥–∏–∞–ª–æ–≥–æ–≤")
        print("   ‚Ä¢ –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏")
        
        # –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
        sys.exit(app.exec())
        
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ –≤–∏–¥–∂–µ—Ç–∞: {e}")
        sys.exit(1)

def test_main_window_integration():
    """–¢–µ—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≥–ª–∞–≤–Ω—ã–º –æ–∫–Ω–æ–º"""
    print("üñ•Ô∏è –ó–∞–ø—É—Å–∫ –¥–µ–º–æ –≥–ª–∞–≤–Ω–æ–≥–æ –æ–∫–Ω–∞ —Å –≥–æ–ª–æ—Å–æ–≤—ã–º –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–º...")
    
    app = QApplication(sys.argv)
    
    try:
        from gui.views.main_window import MainWindow
        
        # –°–æ–∑–¥–∞–µ–º –≥–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ
        window = MainWindow(project_root)
        
        # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–∫–Ω–æ
        window.show()
        
        print("‚úÖ –ì–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ —Å –≥–æ–ª–æ—Å–æ–≤—ã–º –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–º –∑–∞–ø—É—â–µ–Ω–æ")
        print("üí° –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ –≤–∫–ª–∞–¥–∫—É 'üé§ –ì–æ–ª–æ—Å–æ–≤–æ–π' –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏")
        print("üéØ –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–µ–∂–∏–º—ã:")
        print("   ‚Ä¢ ü§ñ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è - —á–∞—Ç —Å AI")
        print("   ‚Ä¢ üé§ –ì–æ–ª–æ—Å–æ–≤–æ–π - –≥–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç")
        print("   ‚Ä¢ üìã –ü—Ä–æ–º–ø—Ç—ã - —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã")
        print("   ‚Ä¢ üìù DSL - DSL –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ")
        print("   ‚Ä¢ üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞–º–∏")
        
        # –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
        sys.exit(app.exec())
        
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ –≥–ª–∞–≤–Ω–æ–≥–æ –æ–∫–Ω–∞: {e}")
        sys.exit(1)

def show_capabilities():
    """–ü–æ–∫–∞–∑–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ GUI"""
    print("üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ GUI –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞:")
    print()
    
    print("üìã –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:")
    print("   üé§ VoiceStatusWidget - –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è")
    print("   üí¨ DialogLogWidget - –ª–æ–≥ –¥–∏–∞–ª–æ–≥–æ–≤ —Å —Ü–≤–µ—Ç–æ–≤–æ–π —Ä–∞–∑–º–µ—Ç–∫–æ–π")
    print("   ‚öôÔ∏è VoiceSettingsWidget - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–æ–ª–æ—Å–∞ –∏ –¥–≤–∏–∂–∫–æ–≤")
    print("   üìã SessionsWidget - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π")
    print("   üßµ VoiceAssistantThread - —Ä–∞–±–æ—Ç–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ")
    print()
    
    print("üé® –í–∏–∑—É–∞–ª—å–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:")
    print("   ‚Ä¢ –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ —Å —Ü–≤–µ—Ç–æ–≤—ã–º–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏")
    print("   ‚Ä¢ –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –ø—Ä–∏ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–∏")
    print("   ‚Ä¢ –¶–≤–µ—Ç–æ–≤–∞—è —Ä–∞–∑–º–µ—Ç–∫–∞ –ª–æ–≥–æ–≤ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å/–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç/—Å–∏—Å—Ç–µ–º–∞/–æ—à–∏–±–∫–∏)")
    print("   ‚Ä¢ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å —Å–ø–ª–∏—Ç—Ç–µ—Ä–∞–º–∏")
    print()
    
    print("üîß –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:")
    print("   ‚Ä¢ –í—ã–±–æ—Ä –¥–≤–∏–∂–∫–æ–≤ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è (Google/Whisper/Fallback)")
    print("   ‚Ä¢ –í—ã–±–æ—Ä –¥–≤–∏–∂–∫–æ–≤ —Å–∏–Ω—Ç–µ–∑–∞ —Ä–µ—á–∏ (macOS say/pyttsx3/Fallback)")
    print("   ‚Ä¢ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≥–æ–ª–æ—Å–æ–≤ –∏ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏")
    print("   ‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º")
    print("   ‚Ä¢ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π –º–∞–∫—Ä–æ—Å–æ–≤")
    print("   ‚Ä¢ –¢–µ—Å—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏")
    print()
    
    print("üéÆ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:")
    print("   ‚Ä¢ –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≥–ª–∞–≤–Ω—ã–º –æ–∫–Ω–æ–º")
    print("   ‚Ä¢ –ù–∞–≤–∏–≥–∞—Ü–∏—è —á–µ—Ä–µ–∑ –±–æ–∫–æ–≤—É—é –ø–∞–Ω–µ–ª—å")
    print("   ‚Ä¢ –°–∏–≥–Ω–∞–ª—ã –¥–ª—è —Å–≤—è–∑–∏ —Å –¥—Ä—É–≥–∏–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏")
    print("   ‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ fallback —Ä–µ–∂–∏–º–æ–≤")

def main():
    """–ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–µ–º–æ"""
    print("üé§ –î–µ–º–æ GUI –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ - –≠—Ç–∞–ø 4")
    print("=" * 60)
    
    show_capabilities()
    
    print("\nüéÆ –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏:")
    print("   1. –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–∏–¥–∂–µ—Ç (–æ—Ç–¥–µ–ª—å–Ω–æ–µ –æ–∫–Ω–æ)")
    print("   2. –ì–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π")
    print("   3. –ü–æ–∫–∞–∑–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (–±–µ–∑ GUI)")
    
    try:
        choice = input("\n–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä (1-3): ").strip()
        
        if choice == "1":
            test_voice_widget_standalone()
        elif choice == "2":
            test_main_window_integration()
        elif choice == "3":
            show_capabilities()
            print("\n‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ–∫–∞–∑–∞–Ω–∞")
        else:
            print("‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä")
            
    except KeyboardInterrupt:
        print("\nüõë –î–µ–º–æ –ø—Ä–µ—Ä–≤–∞–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º")
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –¥–µ–º–æ: {e}")

if __name__ == "__main__":
    main()
