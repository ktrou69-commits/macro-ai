# üéØ –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥: Selenium (DOM) + Template (–∫–ª–∏–∫–∏)
#
# Selenium - –¥–ª—è —á—Ç–µ–Ω–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –¥–ª–∏–Ω–∞)
# Template - –¥–ª—è –∫–ª–∏–∫–æ–≤ –ø–æ –∫–Ω–æ–ø–∫–∞–º (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)

variables:
  ai_model: gemini-2.0-flash-exp
  reply_count: 5
  reply_tone: –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π

sequences:
  tiktok_hybrid:
    name: TikTok Hybrid (Selenium + Template)
    description: Selenium –¥–ª—è DOM, Template –¥–ª—è –∫–ª–∏–∫–æ–≤
    
    steps:
    # 1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Chrome —Å debugging
    - action: selenium_connect
      browser: chrome
      debugger_address: "127.0.0.1:9222"
      description: –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Chrome
    
    # 2. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ TikTok (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Ç–∞–º)
    - action: selenium_navigate
      url: "https://www.tiktok.com"
      description: –û—Ç–∫—Ä—ã—Ç—å TikTok
    
    - action: wait
      duration: 3.0
      description: –ó–∞–≥—Ä—É–∑–∫–∞ TikTok
    
    # 3. –û—Ç–∫—Ä—ã—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (Template - —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ!)
    - action: click
      template: templates/tiktok_comments_btn.png
      wait_for_appear: true
      timeout: 3.0
      description: –û—Ç–∫—Ä—ã—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
    
    - action: wait
      duration: 2.0
    
    # 4. –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
    - action: repeat
      times: "{reply_count}"
      description: –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
      steps:
      
      # 4.1. –ò–∑–≤–ª–µ—á—å —Ç–µ–∫—Å—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è (Selenium - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –¥–ª–∏–Ω–∞!)
      - action: selenium_extract
        selector: "[class*='comment-sidebar'] span"
        index: 0  # –ü–µ—Ä–≤—ã–π –≤–∏–¥–∏–º—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
        save_to: comment_text
        description: –ü—Ä–æ—á–∏—Ç–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —á–µ—Ä–µ–∑ Selenium (–ª—é–±–∞—è –¥–ª–∏–Ω–∞!)
      
      # 4.2. AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞
      - action: ai_generate
        model: "{ai_model}"
        prompt: "–ù–∞–ø–∏—à–∏ {reply_tone} –æ—Ç–≤–µ—Ç –Ω–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π TikTok (–º–∞–∫—Å–∏–º—É–º 50 —Å–∏–º–≤–æ–ª–æ–≤): {comment_text}"
        max_tokens: 50
        temperature: 0.7
        save_to: reply_text
        description: –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç —á–µ—Ä–µ–∑ Gemini
      
      # 4.3. –ö–ª–∏–∫–Ω—É—Ç—å "–û—Ç–≤–µ—Ç–∏—Ç—å" (Template - –¥–≤–∞ –∫–ª–∏–∫–∞)
      - action: click
        template: templates/tiktok_reply_btn.png
        wait_for_appear: true
        timeout: 3.0
        description: –ü–µ—Ä–≤—ã–π –∫–ª–∏–∫ (—Ä–∞—Å–∫—Ä—ã—Ç—å –æ—Ç–≤–µ—Ç—ã)
      
      - action: wait
        duration: 0.5
      
      - action: click
        template: templates/tiktok_reply_btn.png
        wait_for_appear: true
        timeout: 3.0
        description: –í—Ç–æ—Ä–æ–π –∫–ª–∏–∫ (–æ—Ç–∫—Ä—ã—Ç—å –ø–æ–ª–µ –æ—Ç–≤–µ—Ç–∞)
      
      # 4.4. –ö–ª–∏–∫–Ω—É—Ç—å –ø–æ–ª–µ –≤–≤–æ–¥–∞ (Template)
      - action: click
        template: templates/tiktok_input_field.png
        wait_for_appear: true
        timeout: 3.0
        description: –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–µ –≤–≤–æ–¥–∞
      
      # 4.5. –í–≤–µ—Å—Ç–∏ –æ—Ç–≤–µ—Ç (pyautogui)
      - action: type
        text: "{reply_text}"
        description: –í–≤–µ—Å—Ç–∏ AI –æ—Ç–≤–µ—Ç
      
      # 4.6. –û—Ç–ø—Ä–∞–≤–∏—Ç—å (Template)
      - action: click
        templates:
          - templates/tiktok_send_btn_long.png
          - templates/tiktok_send_btn.png
        wait_for_appear: true
        timeout: 3.0
        index: 1
        description: –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å (–≤–µ—Ä—Ö–Ω—è—è)
      
      # 4.7. –ü–∞—É–∑–∞
      - action: wait
        duration: 2.0
        description: –ü–∞—É–∑–∞ –º–µ–∂–¥—É –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
      
      # 4.8. –°–∫—Ä–æ–ª–ª –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—é (Selenium)
      - action: selenium_scroll
        direction: down
        amount: 200
        description: –°–∫—Ä–æ–ª–ª –∫ —Å–ª–µ–¥—É—é—â–µ–º—É
    
    # 5. –ó–∞–∫—Ä—ã—Ç—å Selenium (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    - action: selenium_close
      description: –ó–∞–∫—Ä—ã—Ç—å Selenium

settings:
  default_delay: 1
  failsafe: true
