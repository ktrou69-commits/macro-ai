# Telegram Whitelist - –û—Ç–≤–µ—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –ª—é–¥—è–º
# –£–∫–∞–∂–∏ ID –ª—é–¥–µ–π –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

sequences:
  telegram_whitelist:
    name: "Telegram Whitelist Auto Reply"
    description: "–û—Ç–≤–µ—á–∞–µ—Ç –¢–û–õ–¨–ö–û –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –ª—é–¥—è–º –ø–æ –∏—Ö ID"
    
    steps:
    # 1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Chrome
    - action: selenium_connect
      browser: chrome
      debugger_address: "127.0.0.1:9222"
      description: –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Chrome
    
    - action: wait
      duration: 2.0
    
    # 2. –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª
    - action: repeat
      times: 999999
      description: –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å whitelist —á–∞—Ç—ã
      steps:
      
      # 2.1. –ù–∞–π—Ç–∏ –í–°–ï —á–∞—Ç—ã —Å –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º–∏
      - action: selenium_extract
        selector: ".dialog-subtitle-badge-unread.is-visible"
        extract_all: true
        save_all_to: all_unread_badges
        skip_empty: true
        wait_for_element: false
        timeout: 3.0
        description: –ù–∞–π—Ç–∏ –≤—Å–µ —á–∞—Ç—ã —Å –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º–∏
      
      # 2.2. –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ —á–∞—Ç —Å ID –∏–∑ whitelist
      # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ –æ—á–µ—Ä–µ–¥–∏: —Å–Ω–∞—á–∞–ª–∞ 7204684283, –ø–æ—Ç–æ–º 7816070239, –ø–æ—Ç–æ–º 924192692
      - action: selenium_click
        selector: "a.chatlist-chat[data-peer-id='7204684283']"
        index: 0
        wait_for_element: false
        timeout: 1.0
        description: –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ Fsdf (–µ—Å–ª–∏ –µ—Å—Ç—å –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ)
      
      - action: selenium_click
        selector: "a.chatlist-chat[data-peer-id='7816070239']"
        index: 0
        wait_for_element: false
        timeout: 1.0
        description: –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ Joker (–µ—Å–ª–∏ –µ—Å—Ç—å –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ)
      
      - action: selenium_click
        selector: "a.chatlist-chat[data-peer-id='924192692']"
        index: 0
        wait_for_element: false
        timeout: 1.0
        description: –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ –ê—Ä—Ç–µ–º–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ)
      
      - action: wait
        duration: 1.0
      
      # 2.3. –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —ç—Ç–æ–º —á–∞—Ç–µ
      - action: repeat
        times: 5
        description: –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è
        steps:
        
        # 2.3.1. –ò–∑–≤–ª–µ—á—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤—Ö–æ–¥—è—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        - action: selenium_extract
          selector: ".bubble.is-in .translatable-message"
          index: -1
          save_to: last_message
          save_previous_to: previous_message
          skip_if_same: true
          skip_empty: false
          description: –ò–∑–≤–ª–µ—á—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        
        # 2.3.2. AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç
        - action: ai_generate
          model: "{ai_model}"
          prompt: "–ù–∞–ø–∏—à–∏ –û–î–ò–ù –∫–æ—Ä–æ—Ç–∫–∏–π {reply_tone} –æ—Ç–≤–µ—Ç –Ω–∞ —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ. –ú–∞–∫—Å–∏–º—É–º 30 —Å–∏–º–≤–æ–ª–æ–≤. –¢–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞, –±–µ–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏ –ø–æ—è—Å–Ω–µ–Ω–∏–π: {last_message}"
          max_tokens: 20
          temperature: 0.8
          save_to: reply_text
          description: –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç —á–µ—Ä–µ–∑ AI
        
        # 2.3.3. –ö–ª–∏–∫–Ω—É—Ç—å –ø–æ–ª–µ –≤–≤–æ–¥–∞
        - action: click
          template: templates/telegram_input_field.png
          wait_for_appear: true
          timeout: 3.0
          description: –ö–ª–∏–∫–Ω—É—Ç—å –ø–æ–ª–µ –≤–≤–æ–¥–∞
        
        - action: wait
          duration: 0.5
        
        # 2.3.4. –ü–µ—á–∞—Ç–∞—Ç—å –æ—Ç–≤–µ—Ç
        - action: selenium_type
          selector: ".input-message-input[contenteditable='true']"
          text: "{reply_text}"
          interval: 0.1
          description: –ü–µ—á–∞—Ç–∞—Ç—å AI –æ—Ç–≤–µ—Ç
        
        - action: wait
          duration: 0.5
        
        # 2.3.5. –û—Ç–ø—Ä–∞–≤–∏—Ç—å
        - action: click
          template: templates/telegram_send_btn.png
          wait_for_appear: true
          timeout: 3.0
          description: –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É –æ—Ç–ø—Ä–∞–≤–∫–∏
        
        - action: wait
          duration: 1.0
      
      # 2.4. –ü–∞—É–∑–∞ –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º —á–∞—Ç–æ–º
      - action: wait
        duration: 5.0
        description: –ü–∞—É–∑–∞ –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º whitelist —á–∞—Ç–æ–º

# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
variables:
  ai_model: "gemini-2.0-flash-exp"
  reply_tone: "–¥–µ—Ä–∑–∫–∏–π"
  
  # ‚≠ê WHITELIST - ID –ª—é–¥–µ–π –∫–æ—Ç–æ—Ä—ã–º –æ—Ç–≤–µ—á–∞—Ç—å
  person1_id: "7204684283"   # Fsdf
  person2_id: "7816070239"   # ùìôùì∏ùì¥ùìÆùìª üåπ
  person3_id: "924192692"    # –ê—Ä—Ç–µ–º –ß—É–º–∞—á–µ–Ω–∫–æ
  
  # –î–æ–±–∞–≤—å –±–æ–ª—å—à–µ –ª—é–¥–µ–π –µ—Å–ª–∏ –Ω—É–∂–Ω–æ:
  # person4_id: "123456789"
  # person5_id: "987654321"
